<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema RPPS | Enterprise</title>
    
    <!-- Bibliotecas Externas (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Nosso CSS Unificado -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="h-screen flex overflow-hidden bg-slate-50 text-slate-800 font-sans">

    <!-- 1. MENU LATERAL (SIDEBAR) -->
    <aside class="w-72 bg-slate-900 text-white flex flex-col shadow-2xl flex-shrink-0 z-30 print:hidden">
        <div class="p-6 border-b border-slate-800 text-center">
            <div class="mb-4 flex justify-center">
                <img id="sidebar-logo" src="" class="h-16 w-16 object-contain bg-white rounded-lg p-1 hidden shadow-lg">
                <div id="sidebar-logo-placeholder" class="h-16 w-16 bg-blue-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-900/50 text-white">
                    <i class="fa-solid fa-building-columns text-2xl"></i>
                </div>
            </div>
            <h1 class="text-2xl font-bold tracking-tight mb-2">Gestão RPPS</h1>
            <div class="px-2">
                <p id="sidebar-institution-name" class="text-[11px] font-bold text-slate-300 uppercase tracking-wide leading-tight min-h-[1rem]">Carregando...</p>
                <p id="sidebar-cnpj" class="text-[10px] text-slate-500 font-mono mt-1"></p>
            </div>
        </div>

        <nav class="flex-1 py-6 px-4 space-y-2 overflow-y-auto">
            <button onclick="router.navigate('guia-rapido')" id="btn-guia-rapido" class="menu-item active rounded-lg">
                <i class="fa-solid fa-rocket w-5 text-center"></i> Início
            </button>
            <button onclick="router.navigate('dashboard')" id="btn-dashboard" class="menu-item rounded-lg">
                <i class="fa-solid fa-chart-pie w-5 text-center"></i> Visão Geral
            </button>
            
            <div class="pt-4 pb-2 px-3 text-xs font-bold text-slate-500 uppercase tracking-wider">Operacional</div>
            <button onclick="router.navigate('recolhimento')" id="btn-recolhimento" class="menu-item rounded-lg">
                <i class="fa-solid fa-file-invoice-dollar w-5 text-center"></i> Lançar Guia
            </button>
            <button onclick="router.navigate('folha')" id="btn-folha" class="menu-item rounded-lg">
                <i class="fa-solid fa-users-viewfinder w-5 text-center"></i> Folha de Pagamento
            </button>
            <button onclick="router.navigate('imposto-renda')" id="btn-imposto-renda" class="menu-item rounded-lg">
                <i class="fa-solid fa-scale-balanced w-5 text-center"></i> Imposto de Renda
            </button>
            <button onclick="router.navigate('prev-municipal')" id="btn-prev-municipal" class="menu-item rounded-lg">
                <i class="fa-solid fa-piggy-bank w-5 text-center"></i> Prev. Municipal
            </button>

            <div class="pt-4 pb-2 px-3 text-xs font-bold text-slate-500 uppercase tracking-wider">Servidor</div>
            <button onclick="router.navigate('margem')" id="btn-margem" class="menu-item rounded-lg">
                <i class="fa-solid fa-calculator w-5 text-center"></i> Margem Consignável
            </button>

            <div class="pt-4 pb-2 px-3 text-xs font-bold text-slate-500 uppercase tracking-wider">Financeiro</div>
            <button onclick="router.navigate('consignados')" id="btn-consignados" class="menu-item rounded-lg">
                <i class="fa-solid fa-file-contract w-5 text-center"></i> Consignados
            </button>
            <button onclick="router.navigate('despesas')" id="btn-despesas" class="menu-item rounded-lg">
                <i class="fa-solid fa-file-invoice w-5 text-center"></i> Despesas Adm.
            </button>
            <button onclick="router.navigate('pagamentos')" id="btn-pagamentos" class="menu-item rounded-lg">
                <i class="fa-solid fa-money-bill-transfer w-5 text-center"></i> Pagamentos
            </button>

            <div class="pt-4 pb-2 px-3 text-xs font-bold text-slate-500 uppercase tracking-wider">Gestão</div>
            <button onclick="router.navigate('relatorios')" id="btn-relatorios" class="menu-item rounded-lg">
                <i class="fa-solid fa-print w-5 text-center"></i> Central Relatórios
            </button>
            
            <div class="pt-4 pb-2 px-3 text-xs font-bold text-slate-500 uppercase tracking-wider">Documentos</div>
            <button onclick="router.navigate('arquivos')" id="btn-arquivos" class="menu-item rounded-lg">
                <i class="fa-solid fa-folder-open w-5 text-center"></i> Arquivos Digitais
            </button>
            
            <div class="pt-4 pb-2 px-3 text-xs font-bold text-slate-500 uppercase tracking-wider">Ferramentas</div>
            <button onclick="router.navigate('importacao')" id="btn-importacao" class="menu-item rounded-lg">
                <i class="fa-solid fa-file-import w-5 text-center"></i> Importação
            </button>

            <div class="mt-auto pt-6 border-t border-slate-800 pb-6">
                <button onclick="router.navigate('config')" id="btn-config" class="menu-item rounded-lg">
                    <i class="fa-solid fa-gear w-5 text-center"></i> Configurações
                </button>
            </div>
        </nav>
    </aside>

    <!-- 2. CONTEÚDO PRINCIPAL -->
    <main class="flex-1 overflow-y-auto relative flex flex-col h-full w-full">
        
        <!-- Header Superior -->
        <header class="bg-white/80 backdrop-blur-md sticky top-0 z-20 border-b border-slate-200 px-8 py-5 flex justify-between items-center print:hidden">
            <div>
                <h2 id="page-title" class="text-2xl font-bold text-slate-800 tracking-tight">Início</h2>
                <p class="text-sm text-slate-500 mt-1">Bem-vindo ao painel de controle.</p>
            </div>
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2 text-sm font-medium text-slate-600 bg-slate-50 px-4 py-2 rounded-full border border-slate-200 shadow-sm">
                   <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                   API Conectada
                </div>
            </div>
        </header>

        <!-- Loading Overlay -->
        <div id="loading" class="hidden fixed inset-0 bg-white/90 z-[100] flex flex-col items-center justify-center backdrop-blur-sm transition-opacity">
            <div class="w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"></div>
            <p class="mt-4 text-slate-600 font-semibold tracking-wide animate-pulse">Processando dados...</p>
        </div>

        <!-- CONTAINER DAS PÁGINAS -->
        <div class="p-8 max-w-7xl mx-auto w-full">

            <!-- PÁGINA: GUIA RÁPIDO (HOME) -->
            <section id="page-guia-rapido" class="page-content">
                <div class="max-w-7xl mx-auto py-6">
                    <div class="mb-10 text-center relative">
                        <h2 class="text-4xl font-black text-slate-800 mb-2 tracking-tight">
                            Olá, <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600">Controlador</span>!
                        </h2>
                        <p class="text-lg text-slate-500 font-medium capitalize" id="dataExtensoGuia">Carregando data...</p>
                        <div class="mt-6">
                            <button onclick="router.navigate('dashboard')" class="inline-flex items-center gap-2 px-5 py-2 bg-slate-800 text-white rounded-full text-sm font-bold shadow-lg hover:bg-slate-900 transition transform hover:scale-105">
                                <i class="fa-solid fa-chart-pie"></i> Ver Dashboard Completo
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 px-4">
                        <!-- Botões de Acesso Rápido -->
                        <button onclick="router.navigate('recolhimento')" class="group bg-white p-6 rounded-3xl shadow-sm hover:shadow-xl border border-slate-100 hover:border-blue-200 transition-all duration-300 transform hover:-translate-y-1 text-left relative overflow-hidden">
                            <div class="h-14 w-14 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center text-2xl mb-4 group-hover:bg-blue-600 group-hover:text-white transition-colors duration-300 shadow-sm"><i class="fa-solid fa-file-invoice-dollar"></i></div>
                            <h3 class="text-lg font-bold text-slate-700 group-hover:text-blue-700">Receitas</h3>
                            <p class="text-xs text-slate-400 mt-1 font-medium">Lançar Guias</p>
                        </button>
                        <button onclick="router.navigate('folha')" class="group bg-white p-6 rounded-3xl shadow-sm hover:shadow-xl border border-slate-100 hover:border-yellow-200 transition-all duration-300 transform hover:-translate-y-1 text-left relative overflow-hidden">
                            <div class="h-14 w-14 rounded-2xl bg-yellow-50 text-yellow-600 flex items-center justify-center text-2xl mb-4 group-hover:bg-yellow-500 group-hover:text-white transition-colors duration-300 shadow-sm"><i class="fa-solid fa-users-viewfinder"></i></div>
                            <h3 class="text-lg font-bold text-slate-700 group-hover:text-yellow-600">Folha</h3>
                            <p class="text-xs text-slate-400 mt-1 font-medium">Gestão de Pessoal</p>
                        </button>
                        <button onclick="router.navigate('pagamentos')" class="group bg-white p-6 rounded-3xl shadow-sm hover:shadow-xl border border-slate-100 hover:border-emerald-200 transition-all duration-300 transform hover:-translate-y-1 text-left relative overflow-hidden">
                            <div class="h-14 w-14 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center text-2xl mb-4 group-hover:bg-emerald-600 group-hover:text-white transition-colors duration-300 shadow-sm"><i class="fa-solid fa-money-bill-transfer"></i></div>
                            <h3 class="text-lg font-bold text-slate-700 group-hover:text-emerald-700">Pagamentos</h3>
                            <p class="text-xs text-slate-400 mt-1 font-medium">Contas e Baixas</p>
                        </button>
                        <button onclick="router.navigate('relatorios')" class="group bg-white p-6 rounded-3xl shadow-sm hover:shadow-xl border border-slate-100 hover:border-slate-300 transition-all duration-300 transform hover:-translate-y-1 text-left relative overflow-hidden">
                            <div class="h-14 w-14 rounded-2xl bg-slate-100 text-slate-600 flex items-center justify-center text-2xl mb-4 group-hover:bg-slate-700 group-hover:text-white transition-colors duration-300 shadow-sm"><i class="fa-solid fa-print"></i></div>
                            <h3 class="text-lg font-bold text-slate-700 group-hover:text-slate-900">Relatórios</h3>
                            <p class="text-xs text-slate-400 mt-1 font-medium">Central de Impressão</p>
                        </button>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: DASHBOARD (BI) -->
            <section id="page-dashboard" class="page-content hidden">
                <div class="card-dashboard p-6 mb-8 border-l-4 border-l-blue-600">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="font-bold text-2xl text-slate-800">Análise Financeira</h3>
                            <p class="text-sm text-slate-500">Comparativo dinâmico de receitas e despesas.</p>
                        </div>
                        <button onclick="dashboard.carregar()" class="btn-secondary text-sm"><i class="fa-solid fa-sync mr-1"></i> Atualizar</button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 bg-slate-50 p-4 rounded-lg border border-slate-100">
                        <div>
                            <label class="label-padrao">Ano</label>
                            <select id="biAno" class="input-padrao font-bold text-blue-900 bg-white" onchange="dashboard.atualizarGrafico()"><option value="">Carregando...</option></select>
                        </div>
                        <div>
                            <label class="label-padrao text-blue-600">Série Azul</label>
                            <select id="biSerieA" class="input-padrao" onchange="dashboard.atualizarGrafico()">
                                <option value="guias_total">Receita de Guias</option>
                                <option value="folha_bruto">Folha (Bruto)</option>
                                <option value="pagamentos_total">Total Pago</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-padrao text-orange-600">Série Laranja</label>
                            <select id="biSerieB" class="input-padrao" onchange="dashboard.atualizarGrafico()">
                                <option value="folha_bruto" selected>Folha (Bruto)</option>
                                <option value="despesas_total">Despesas Adm.</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-padrao">Tipo</label>
                            <select id="biTipoGrafico" class="input-padrao" onchange="dashboard.mudarTipoGrafico()">
                                <option value="bar">Barras</option>
                                <option value="line">Linhas</option>
                            </select>
                        </div>
                    </div>
                    <div class="relative h-80 w-full">
                        <canvas id="chartFinanceiro"></canvas>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8 pt-6 border-t border-slate-100">
                        <div class="text-center">
                            <p class="text-xs font-bold text-slate-400 uppercase mb-1" id="labelTotalA">Total Série Azul</p>
                            <h4 class="text-2xl font-black text-blue-600" id="valTotalA">R$ 0,00</h4>
                        </div>
                        <div class="text-center border-x border-slate-100">
                            <p class="text-xs font-bold text-slate-400 uppercase mb-1" id="labelTotalB">Total Série Laranja</p>
                            <h4 class="text-2xl font-black text-orange-500" id="valTotalB">R$ 0,00</h4>
                        </div>
                        <div class="text-center">
                            <p class="text-xs font-bold text-slate-400 uppercase mb-1">Diferença</p>
                            <h4 class="text-2xl font-black text-slate-700" id="valDiferenca">R$ 0,00</h4>
                        </div>
                    </div>
                </div>
            </section>

            <!-- AQUI SERÃO INJETADAS AS OUTRAS PÁGINAS (Operational Part) -->
            
            <div id="operational-pages-container">
            
            <!-- PÁGINA: CONFIGURAÇÕES -->
            <section id="page-config" class="page-content hidden">
                <div class="max-w-6xl mx-auto">
                    <!-- Cabeçalho e Navegação de Abas -->
                    <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                        <div>
                            <h3 class="text-3xl font-bold text-slate-800">Configurações do Sistema</h3>
                            <p class="text-slate-500 mt-1">Gerencie dados institucionais, integrações e tabelas auxiliares.</p>
                        </div>
                        
                        <div class="bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm flex mt-4 md:mt-0 overflow-x-auto max-w-full">
                            <button onclick="config.switchView('instituicao')" id="tab-cfg-instituicao" class="px-6 py-2 rounded-lg text-sm font-bold transition whitespace-nowrap">
                                <i class="fa-solid fa-building-columns mr-2"></i> Instituição
                            </button>
                            <button onclick="config.switchView('integracoes')" id="tab-cfg-integracoes" class="px-6 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition whitespace-nowrap">
                                <i class="fa-brands fa-google-drive mr-2"></i> Integrações
                            </button>
                            <button onclick="config.switchView('cadastros')" id="tab-cfg-cadastros" class="px-6 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition whitespace-nowrap">
                                <i class="fa-solid fa-list-check mr-2"></i> Tabelas Auxiliares
                            </button>
                        </div>
                    </div>

                    <!-- FORMULÁRIO PRINCIPAL -->
                    <form id="formConfig" onsubmit="config.handleSave(event)">
                        <!-- VIEW 1: DADOS INSTITUCIONAIS -->
                        <div id="view-cfg-instituicao">
                            <div class="card-dashboard p-8 border-l-4 border-l-blue-600">
                                <h4 class="font-bold text-slate-700 text-lg mb-6 border-b border-slate-100 pb-2">Identificação do RPPS</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="md:col-span-2">
                                        <label class="label-padrao">Nome do Instituto</label>
                                        <input type="text" name="nome" required class="input-padrao text-lg font-bold text-slate-700" placeholder="Ex: Instituto de Previdência...">
                                    </div>
                                    <div>
                                        <label class="label-padrao">CNPJ</label>
                                        <input type="text" name="cnpj" class="input-padrao mask-cnpj">
                                    </div>
                                    <div>
                                        <label class="label-padrao">Telefone</label>
                                        <input type="text" name="telefone" class="input-padrao mask-tel">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="label-padrao">Endereço Completo</label>
                                        <input type="text" name="endereco" class="input-padrao">
                                    </div>
                                    <div>
                                        <label class="label-padrao">Diretor Responsável</label>
                                        <input type="text" name="diretor" required class="input-padrao">
                                    </div>
                                    <!-- Campo de Logo -->
                                    <div>
                                        <label class="label-padrao">URL da Logo (Link da Imagem)</label>
                                        <div class="flex gap-3 items-center">
                                            <div class="flex-1">
                                                <input type="text" name="urlLogo" id="inputUrlLogo" class="input-padrao text-xs text-blue-600 truncate" placeholder="https://..." onchange="document.getElementById('previewLogoConfig').src = this.value">
                                            </div>
                                            <div class="h-10 w-10 border border-slate-200 rounded bg-slate-50 flex items-center justify-center overflow-hidden">
                                                <img id="previewLogoConfig" src="" class="max-h-full max-w-full object-contain" onerror="this.style.display='none'" onload="this.style.display='block'">
                                            </div>
                                        </div>
                                        <p class="text-[10px] text-gray-400 mt-1">Cole o link direto da imagem para sair nos relatórios.</p>
                                    </div>
                                </div>
                                <div class="mt-8 flex justify-end">
                                    <button type="submit" class="btn-primary w-full md:w-auto px-8 py-3 shadow-lg">
                                        <i class="fa-solid fa-save mr-2"></i> Salvar Dados
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- VIEW 2: INTEGRAÇÕES -->
                        <div id="view-cfg-integracoes" class="hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <!-- Cartão Docs -->
                                <div class="card-dashboard p-6 border-t-4 border-t-blue-500">
                                    <div class="flex items-center gap-3 mb-4">
                                        <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600">
                                            <i class="fa-solid fa-file-word text-xl"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-bold text-slate-800">Motor de Documentos</h4>
                                            <p class="text-xs text-slate-500">Geração de Carta de Margem</p>
                                        </div>
                                    </div>
                                    <label class="label-padrao text-blue-600">ID do Modelo (Google Docs)</label>
                                    <input type="text" name="idTemplateMargem" id="inputIdTemplate" class="input-padrao font-mono text-xs text-slate-500 mb-3">
                                    <button type="button" onclick="config.criarModelo()" class="w-full py-2 rounded-lg border border-blue-200 text-blue-600 text-sm font-bold hover:bg-blue-50 transition flex items-center justify-center gap-2">
                                        <i class="fa-solid fa-magic-wand-sparkles"></i> Criar Modelo Padrão
                                    </button>
                                </div>

                                <!-- Cartão Drive -->
                                <div class="card-dashboard p-6 border-t-4 border-t-green-500">
                                    <div class="flex items-center gap-3 mb-4">
                                        <div class="w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center text-green-600">
                                            <i class="fa-brands fa-google-drive text-xl"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-bold text-slate-800">Armazenamento em Nuvem</h4>
                                            <p class="text-xs text-slate-500">GED - Arquivos Digitais</p>
                                        </div>
                                    </div>
                                    <label class="label-padrao text-green-600">ID da Pasta Raiz (Google Drive)</label>
                                    <input type="text" name="idPastaArquivos" id="inputIdPasta" class="input-padrao font-mono text-xs text-slate-500 mb-3">
                                    <button type="button" onclick="config.criarPasta()" class="w-full py-2 rounded-lg border border-green-200 text-green-600 text-sm font-bold hover:bg-green-50 transition flex items-center justify-center gap-2">
                                        <i class="fa-solid fa-folder-plus"></i> Criar Pasta Automática
                                    </button>
                                </div>
                            </div>
                            <div class="mt-8 flex justify-end">
                                <button type="submit" class="btn-primary bg-slate-800 hover:bg-slate-900 w-full md:w-auto px-8 py-3 shadow-lg">
                                    <i class="fa-solid fa-cloud-arrow-up mr-2"></i> Salvar IDs de Integração
                                </button>
                            </div>
                        </div>
                    </form>

                    <!-- VIEW 3: TABELAS AUXILIARES -->
                    <div id="view-cfg-cadastros" class="hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            
                            <!-- 1. Recursos (Guia) -->
                            <div class="card-dashboard overflow-hidden">
                                <div class="px-5 py-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                    <h3 class="font-bold text-slate-700 text-xs uppercase">Recursos / Guias</h3>
                                    <button onclick="recolhimento.addRecurso()" class="text-blue-600 hover:text-blue-800 text-xs font-bold"><i class="fa-solid fa-plus"></i> Novo</button>
                                </div>
                                <div class="p-4">
                                    <div class="flex gap-2 mb-3">
                                        <input type="text" id="novoRecurso" placeholder="Digite..." class="input-padrao text-xs">
                                    </div>
                                    <ul id="listaRecursos" class="divide-y divide-slate-100 max-h-40 overflow-y-auto"></ul>
                                </div>
                            </div>

                            <!-- 2. Tipos de Folha -->
                            <div class="card-dashboard overflow-hidden">
                                <div class="px-5 py-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                    <h3 class="font-bold text-slate-700 text-xs uppercase">Tipos de Folha</h3>
                                    <button onclick="folha.addNomeFolha()" class="text-yellow-600 hover:text-yellow-800 text-xs font-bold"><i class="fa-solid fa-plus"></i> Novo</button>
                                </div>
                                <div class="p-4">
                                    <div class="flex gap-2 mb-3">
                                        <input type="text" id="novoNomeFolha" placeholder="Digite..." class="input-padrao text-xs">
                                    </div>
                                    <ul id="listaNomesFolha" class="divide-y divide-slate-100 max-h-40 overflow-y-auto"></ul>
                                </div>
                            </div>

                            <!-- 3. Origens IR -->
                            <div class="card-dashboard overflow-hidden">
                                <div class="px-5 py-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                    <h3 class="font-bold text-slate-700 text-xs uppercase">Origens IRRF</h3>
                                    <button onclick="irrf.addOrigemIR()" class="text-pink-600 hover:text-pink-800 text-xs font-bold"><i class="fa-solid fa-plus"></i> Novo</button>
                                </div>
                                <div class="p-4">
                                    <div class="flex gap-2 mb-3">
                                        <input type="text" id="novaOrigemIR" placeholder="Digite..." class="input-padrao text-xs">
                                    </div>
                                    <ul id="listaOrigensIR" class="divide-y divide-slate-100 max-h-40 overflow-y-auto"></ul>
                                </div>
                            </div>
                            
                            <!-- 4. Origens Previdência -->
                            <div class="card-dashboard overflow-hidden border-t-2 border-t-purple-500">
                                <div class="px-5 py-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                    <h3 class="font-bold text-slate-700 text-xs uppercase">Origens Prev. Municipal</h3>
                                    <button onclick="previdencia.addOrigemPrev()" class="text-purple-600 hover:text-purple-800 text-xs font-bold"><i class="fa-solid fa-plus"></i> Novo</button>
                                </div>
                                <div class="p-4">
                                    <div class="flex gap-2 mb-3">
                                        <input type="text" id="novaOrigemPrev" placeholder="Ex: Aposentados..." class="input-padrao text-xs">
                                    </div>
                                    <ul id="listaOrigensPrev" class="divide-y divide-slate-100 max-h-40 overflow-y-auto"></ul>
                                </div>
                            </div>

                            <!-- 5. Bancos Consignados -->
                            <div class="card-dashboard overflow-hidden border-t-2 border-t-teal-500">
                                <div class="px-5 py-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                    <h3 class="font-bold text-slate-700 text-xs uppercase">Bancos Consignados</h3>
                                    <button onclick="consignados.addBancoConsig()" class="text-teal-600 hover:text-teal-800 text-xs font-bold"><i class="fa-solid fa-plus"></i> Novo</button>
                                </div>
                                <div class="p-4">
                                    <div class="flex gap-2 mb-3">
                                        <input type="text" id="novoBancoConsig" placeholder="Ex: Caixa, Bradesco..." class="input-padrao text-xs">
                                    </div>
                                    <ul id="listaBancosConsig" class="divide-y divide-slate-100 max-h-40 overflow-y-auto"></ul>
                                </div>
                            </div>

                            <!-- 6. Tipos de Arquivo (GED) -->
                            <div class="card-dashboard overflow-hidden">
                                <div class="px-5 py-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                    <h3 class="font-bold text-slate-700 text-xs uppercase">Tipos de Documento</h3>
                                    <button onclick="arquivos.addTipoArquivo()" class="text-cyan-600 hover:text-cyan-800 text-xs font-bold"><i class="fa-solid fa-plus"></i> Novo</button>
                                </div>
                                <div class="p-4">
                                    <div class="flex gap-2 mb-3">
                                        <input type="text" id="novoTipoArquivo" placeholder="Digite..." class="input-padrao text-xs">
                                    </div>
                                    <ul id="listaTiposArquivo" class="divide-y divide-slate-100 max-h-40 overflow-y-auto"></ul>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: RECOLHIMENTO -->
            <section id="page-recolhimento" class="page-content hidden">
                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-slate-800">Recolhimento de Contribuições</h3>
                            <p class="text-slate-500 text-sm">Gestão de guias e receitas previdenciárias.</p>
                        </div>
                        <div class="flex gap-2 mt-4 md:mt-0">
                            <button onclick="recolhimento.switchView('operacional')" id="tab-recolhimento-operacional" class="px-4 py-2 rounded-lg text-sm font-bold transition">Lançamentos</button>
                            <button onclick="recolhimento.switchView('gerencial')" id="tab-recolhimento-gerencial" class="px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition">Relatório Anual</button>
                        </div>
                    </div>
                    <!-- VIEW: OPERACIONAL -->
                    <div id="view-recolhimento-operacional">
                        <div class="card-dashboard p-6 mb-8 border-l-4 border-l-blue-500">
                            <form id="formRecolhimento" onsubmit="recolhimento.handleSave(event)">
                                <input type="hidden" name="id" id="idGuiaEdicao">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div><label class="label-padrao">Competência</label><input type="month" name="competencia" id="inputCompetenciaGuia" required class="input-padrao font-bold text-slate-700"></div>
                                    <div><label class="label-padrao">Tipo de Guia</label><select name="tipoGuia" class="input-padrao" required><option value="Mensal">Mensal</option><option value="13º Salário">13º Salário</option><option value="Suplementar">Suplementar</option><option value="Diferença">Diferença</option></select></div>
                                    <div class="md:col-span-2"><label class="label-padrao">Recurso / Destinação</label><select name="tipoRecurso" id="selectRecurso" required class="input-padrao font-medium"><option value="">A carregar...</option></select></div>
                                    <div><label class="label-padrao text-slate-400">Base de Cálculo Patronal (R$)</label><input type="text" name="basePatronal" id="basePatronal" class="input-padrao mask-money text-slate-500"></div>
                                    <div><label class="label-padrao text-slate-400">Base de Cálculo Segurado (R$)</label><input type="text" name="baseSegurado" id="baseSegurado" class="input-padrao mask-money text-slate-500"></div>
                                    <div><label class="label-padrao text-blue-600">Valor Patronal (R$)</label><input type="text" name="valorPatronal" id="valorPatronal" required class="input-padrao mask-money font-bold text-lg" oninput="recolhimento.calcularTotal()"></div>
                                    <div><label class="label-padrao text-indigo-600">Valor Segurado (R$)</label><input type="text" name="valorSegurado" id="valorSegurado" required class="input-padrao mask-money font-bold text-lg" oninput="recolhimento.calcularTotal()"></div>
                                    <div class="md:col-span-2"><label class="label-padrao">Observações</label><textarea name="observacoes" rows="2" class="input-padrao resize-none" placeholder="Opcional..."></textarea></div>
                                </div>
                                <div class="mt-6 flex flex-col md:flex-row justify-between items-center gap-4 border-t border-slate-100 pt-6">
                                    <div class="text-center md:text-left bg-slate-50 px-4 py-2 rounded-lg border border-slate-200"><span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider block">Total Calculado</span><span id="displayTotal" class="text-2xl font-black text-slate-800">R$ 0,00</span></div>
                                    <div class="flex gap-3 w-full md:w-auto">
                                        <button type="button" onclick="recolhimento.cancelarEdicao()" id="btnCancelGuia" class="btn-secondary hidden border-red-200 text-red-600 hover:bg-red-50 flex-1 md:flex-none"><i class="fa-solid fa-xmark mr-2"></i> Cancelar</button>
                                        <button type="submit" id="btnSalvarGuia" class="btn-primary flex-1 md:flex-none bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-500/30 border-none"><i class="fa-solid fa-check mr-2"></i> Lançar Guia</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="flex justify-between items-end mb-4 px-2">
                            <h4 class="font-bold text-slate-700">Histórico de Guias</h4>
                            <div class="flex items-center gap-2 bg-white p-1 rounded-lg border border-slate-200 shadow-sm">
                                <input type="month" id="filtroHistoricoGuia" onchange="recolhimento.carregarHistorico()" class="text-xs border-0 outline-none bg-transparent font-bold text-slate-600 px-2 cursor-pointer">
                                <button onclick="recolhimento.limparFiltro()" class="text-slate-400 hover:text-red-500 p-1 transition" title="Limpar Filtro"><i class="fa-solid fa-eraser"></i></button>
                                <div class="w-px h-4 bg-slate-200 mx-1"></div>
                                <button onclick="recolhimento.carregarHistorico()" class="text-blue-600 hover:bg-blue-50 p-1 rounded transition text-xs" title="Atualizar"><i class="fa-solid fa-rotate"></i></button>
                            </div>
                        </div>
                        <div class="card-dashboard overflow-hidden p-0 border-none shadow-lg">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left border-collapse">
                                    <thead class="bg-slate-50 text-slate-500 uppercase text-[10px] font-bold border-b border-slate-200">
                                        <tr>
                                            <th class="pl-6 py-3 text-left">Competência</th>
                                            <th class="px-4 py-3 text-left">Tipo</th>
                                            <th class="px-4 py-3 text-left">Recurso</th>
                                            <th class="px-4 py-3 text-right">Valor Total</th>
                                            <th class="px-4 py-3 text-center">Status</th>
                                            <th class="pr-6 py-3 text-center">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="listaHistoricoGuias" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-blue-100 font-bold text-slate-800 border-t-2 border-blue-300">
                                        <tr>
                                            <td colspan="3" class="px-6 py-4 text-right uppercase text-[11px] tracking-wider">Total da Competência:</td>
                                            <td class="px-4 py-4 text-right font-black text-slate-900 text-lg" id="totalCompetenciaGuia">R$ 0,00</td>
                                            <td colspan="2"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- VIEW: GERENCIAL -->
                    <div id="view-recolhimento-gerencial" class="hidden">
                        <div class="card-dashboard p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h4 class="font-bold text-slate-800">Matriz Anual de Arrecadação</h4>
                                <select id="filtroAnoRecolhimento" onchange="recolhimento.renderizarRelatorio()" class="input-padrao py-1 w-24 font-bold border-slate-200 bg-slate-50"></select>
                            </div>
                            <div class="overflow-x-auto rounded-lg border border-slate-200">
                                <table class="w-full text-[11px]">
                                    <thead class="bg-slate-800 text-white font-bold"></thead>
                                    <tbody id="tabelaRelatorioRecolhimento" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-slate-100 font-bold border-t border-slate-300"></tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: FOLHA DE PAGAMENTO -->
            <section id="page-folha" class="page-content hidden">
                <div class="max-w-6xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-slate-800">Folha de Pagamento</h3>
                            <p class="text-slate-500 text-sm">Gestão de vencimentos, líquida e distribuição bancária.</p>
                        </div>
                        <div class="bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm flex mt-4 md:mt-0 overflow-x-auto max-w-full">
                            <button onclick="folha.switchView('operacional')" id="tab-folha-operacional" class="px-4 py-2 rounded-lg text-sm font-bold transition whitespace-nowrap"><i class="fa-solid fa-file-invoice-dollar mr-2"></i> Geral (Totais)</button>
                            <button onclick="folha.switchView('outros-bancos')" id="tab-folha-outros-bancos" class="px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition whitespace-nowrap"><i class="fa-solid fa-money-bill-transfer mr-2"></i> Outros Bancos</button>
                            <button onclick="folha.switchView('gerencial')" id="tab-folha-gerencial" class="px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition whitespace-nowrap"><i class="fa-solid fa-chart-line mr-2"></i> Relatório Anual</button>
                        </div>
                    </div>
                    <div id="view-folha-operacional">
                        <div class="card-dashboard p-6 mb-8 border-l-4 border-l-yellow-500">
                            <h4 class="font-bold text-slate-700 mb-4 text-sm uppercase tracking-wide">Dados da Competência</h4>
                            <form id="formFolha" onsubmit="folha.handleSave(event)">
                                <input type="hidden" name="id" id="idFolhaEdicao">
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    <div><label class="label-padrao">Competência</label><input type="month" name="competencia" id="inputCompetenciaFolha" required class="input-padrao font-bold text-slate-700"></div>
                                    <div><label class="label-padrao">Tipo de Folha</label><select name="tipoFolha" id="selectTipoFolha" required class="input-padrao font-medium"><option value="">A carregar...</option></select></div>
                                    <div><label class="label-padrao text-emerald-600">Total Bruto (R$)</label><input type="text" name="valorBruto" id="folhaBruto" required class="input-padrao mask-money font-bold text-lg" oninput="folha.calcularLiquido()"></div>
                                    <div><label class="label-padrao text-red-500">Total Descontos (R$)</label><input type="text" name="valorDescontos" id="folhaDescontos" required class="input-padrao mask-money font-bold text-lg text-red-600" oninput="folha.calcularLiquido()"></div>
                                    <div class="lg:col-span-4"><label class="label-padrao">Observações</label><textarea name="observacoes" id="inputObsFolha" rows="1" class="input-padrao resize-none" placeholder="Detalhes do lançamento..."></textarea></div>
                                </div>
                                <div class="mt-6 flex flex-col md:flex-row justify-between items-center gap-4 border-t border-slate-100 pt-6">
                                    <div class="text-center md:text-left bg-slate-50 px-4 py-2 rounded-lg border border-slate-200"><span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider block">Valor Líquido Calculado</span><span id="displayLiquido" class="text-2xl font-black text-slate-800">R$ 0,00</span></div>
                                    <div class="flex gap-3 w-full md:w-auto">
                                        <button type="button" onclick="folha.cancelarEdicao()" id="btnCancelFolha" class="btn-secondary hidden border-red-200 text-red-600 hover:bg-red-50 flex-1 md:flex-none"><i class="fa-solid fa-xmark mr-2"></i> Cancelar</button>
                                        <button type="submit" id="btnSalvarFolha" class="btn-primary flex-1 md:flex-none bg-yellow-500 hover:bg-yellow-600 border-none text-white shadow-lg shadow-yellow-500/30"><i class="fa-solid fa-check mr-2"></i> Salvar Lançamento</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="flex justify-between items-end mb-4 px-2">
                            <h4 class="font-bold text-slate-700">Histórico de Lançamentos</h4>
                            <div class="flex items-center gap-2 bg-white p-1 rounded-lg border border-slate-200 shadow-sm">
                                <input type="month" id="filtroHistoricoFolha" onchange="folha.carregarFolhas()" class="text-xs border-0 outline-none bg-transparent font-bold text-slate-600 px-2 cursor-pointer">
                                <button onclick="folha.limparFiltro()" class="text-slate-400 hover:text-red-500 p-1 transition" title="Limpar Filtro"><i class="fa-solid fa-eraser"></i></button>
                                <div class="w-px h-4 bg-slate-200 mx-1"></div>
                                <button onclick="folha.carregarFolhas()" class="text-blue-600 hover:bg-blue-50 p-1 rounded transition text-xs" title="Atualizar"><i class="fa-solid fa-rotate"></i></button>
                            </div>
                        </div>
                        <div class="card-dashboard overflow-hidden p-0 border-none shadow-lg">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left border-collapse">
                                    <thead class="bg-slate-50 text-slate-500 uppercase text-[10px] font-bold border-b border-slate-200">
                                        <tr>
                                            <th class="px-6 py-3">Competência</th>
                                            <th class="px-4 py-3">Tipo</th>
                                            <th class="px-4 py-3 text-right">Bruto</th>
                                            <th class="px-4 py-3 text-right">Descontos</th>
                                            <th class="px-4 py-3 text-right">Líquido</th>
                                            <th class="px-6 py-3 text-center">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="listaFolhas" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-yellow-100 font-bold text-slate-800 border-t-2 border-yellow-300">
                                        <tr>
                                            <td colspan="2" class="px-6 py-4 text-right uppercase text-[11px] tracking-wider">Total da Competência:</td>
                                            <td class="px-4 py-4 text-right text-emerald-700" id="totalCompFolhaBruto">R$ 0,00</td>
                                            <td class="px-4 py-4 text-right text-red-600" id="totalCompFolhaDesc">R$ 0,00</td>
                                            <td class="px-4 py-4 text-right font-black text-slate-900 text-lg" id="totalCompFolhaLiq">R$ 0,00</td>
                                            <td></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="view-folha-outros-bancos" class="hidden space-y-6">
                        <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4">
                            <div class="flex items-center gap-3">
                                <label class="text-sm font-bold text-slate-600">Competência de Trabalho:</label>
                                <input type="month" id="filtroCompOutrosBancos" onchange="folha.carregarOutrosBancos()" class="input-padrao w-40 font-bold text-indigo-700 border-indigo-200">
                            </div>
                            <button onclick="folha.importarMesAnterior()" class="btn-secondary text-xs border-indigo-200 text-indigo-600 hover:bg-indigo-50 w-full md:w-auto"><i class="fa-solid fa-copy mr-2"></i> Importar do Mês Anterior</button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                                <div class="absolute right-0 top-0 p-3 opacity-10"><i class="fa-solid fa-sack-dollar text-4xl"></i></div>
                                <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">Total Líquido (Folha)</p>
                                <h3 id="kpiFolhaLiquida" class="text-2xl font-black text-slate-800 mt-1">R$ 0,00</h3>
                                <p class="text-[10px] text-slate-400 mt-1">Base de Cálculo</p>
                            </div>
                            <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100 shadow-sm relative overflow-hidden">
                                <div class="absolute right-0 top-0 p-3 opacity-10"><i class="fa-solid fa-building-columns text-4xl text-indigo-900"></i></div>
                                <p class="text-xs font-bold text-indigo-400 uppercase tracking-widest">Repasse Outros Bancos</p>
                                <h3 id="kpiOutrosBancos" class="text-2xl font-black text-indigo-700 mt-1">R$ 0,00</h3>
                                <p class="text-[10px] text-indigo-400 mt-1">Soma das remessas abaixo</p>
                            </div>
                            <div class="bg-emerald-50 p-4 rounded-xl border border-emerald-100 shadow-sm relative overflow-hidden">
                                <div class="absolute right-0 top-0 p-3 opacity-10"><i class="fa-solid fa-landmark text-4xl text-emerald-900"></i></div>
                                <p class="text-xs font-bold text-emerald-500 uppercase tracking-widest">Repasse Banco Principal</p>
                                <h3 id="kpiBancoPrincipal" class="text-2xl font-black text-emerald-700 mt-1">R$ 0,00</h3>
                                <p class="text-[10px] text-emerald-500 mt-1">Líquido (-) Outros Bancos</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-1">
                                <div class="card-dashboard p-5 border-l-4 border-l-indigo-500 h-full">
                                    <h4 class="font-bold text-slate-700 mb-4 flex items-center gap-2"><i class="fa-solid fa-plus-circle text-indigo-500"></i> Nova Remessa</h4>
                                    <form id="formOutrosBancos" onsubmit="folha.handleSaveOutrosBancos(event)" class="space-y-4">
                                        <input type="hidden" name="id" id="idRemessaEdicao"><input type="hidden" name="idServidor" id="idServidorOB"><input type="hidden" name="nomeServidor" id="nomeServidorOB"><input type="hidden" name="cpf" id="cpfServidorOB">
                                        <div class="relative">
                                            <label class="label-padrao">Buscar Servidor</label>
                                            <input type="text" id="buscaServidorOB" class="input-padrao font-bold text-indigo-900" placeholder="Digite o nome..." oninput="folha.buscarServidor(this)" autocomplete="off">
                                            <div id="listaSugestoesOB" class="autocomplete-list"></div>
                                        </div>
                                        <div id="detalhesServidorOB" class="hidden bg-slate-50 p-3 rounded border border-slate-100 text-xs space-y-1"><p><strong>Nome:</strong> <span id="lblNomeOB">...</span></p><p><strong>CPF:</strong> <span id="lblCpfOB">...</span></p></div>
                                        <div>
                                            <label class="label-padrao">Banco de Destino</label>
                                            <select name="banco" id="selectBancoOB" class="input-padrao" required><option value="">Selecione...</option><option value="Banco do Brasil">Banco do Brasil</option><option value="Caixa Econômica">Caixa Econômica</option><option value="Bradesco">Bradesco</option><option value="Santander">Santander</option><option value="Itaú">Itaú</option><option value="Sicoob">Sicoob</option><option value="Sicredi">Sicredi</option><option value="Nubank">Nubank</option><option value="Inter">Inter</option><option value="Outros">Outros</option></select>
                                        </div>
                                        <div><label class="label-padrao">Valor Líquido (R$)</label><input type="text" name="valor" id="valorOB" required class="input-padrao mask-money font-bold text-lg text-emerald-600"></div>
                                        <div><label class="label-padrao">Observações</label><input type="text" name="observacoes" id="obsOB" class="input-padrao"></div>
                                        <div class="pt-2 flex gap-2">
                                            <button type="submit" id="btnSalvarOB" class="btn-primary w-full bg-indigo-600 hover:bg-indigo-700 border-none justify-center"><i class="fa-solid fa-plus"></i> Adicionar</button>
                                            <button type="button" onclick="folha.cancelarEdicaoOB()" id="btnCancelOB" class="btn-secondary hidden text-red-500 border-red-200"><i class="fa-solid fa-times"></i></button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="lg:col-span-2">
                                <div class="card-dashboard overflow-hidden p-0 h-full flex flex-col">
                                    <div class="px-5 py-3 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                        <h4 class="font-bold text-slate-700 text-sm">Lista de Remessas</h4>
                                        <span class="text-[10px] bg-white border border-slate-200 px-2 py-1 rounded text-slate-500" id="contadorRemessas">0 registros</span>
                                    </div>
                                    <div class="flex-1 overflow-y-auto max-h-[500px]">
                                        <table class="w-full text-sm text-left">
                                            <thead class="bg-white text-slate-500 font-semibold uppercase text-[10px] sticky top-0 shadow-sm z-10">
                                                <tr>
                                                    <th class="pl-5 py-3">Servidor / CPF</th>
                                                    <th class="px-4 py-3">Banco</th>
                                                    <th class="px-4 py-3 text-right">Valor</th>
                                                    <th class="pr-5 py-3 text-center w-24">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="listaOutrosBancos" class="divide-y divide-slate-100"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="view-folha-gerencial" class="hidden">
                        <div class="card-dashboard p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h4 class="font-bold text-slate-800">Relatório Anual de Folha</h4>
                                <select id="filtroAnoFolha" onchange="folha.processarDadosRelatorio()" class="input-padrao py-1 w-24 font-bold border-slate-200 bg-slate-50"></select>
                            </div>
                            <div class="overflow-x-auto rounded-lg border border-slate-200">
                                <table class="w-full text-sm">
                                    <thead class="bg-slate-800 text-white font-bold">
                                        <tr>
                                            <th class="px-6 py-3 text-left">Mês</th>
                                            <th class="px-4 py-3 text-right">Bruto</th>
                                            <th class="px-4 py-3 text-right">Descontos</th>
                                            <th class="px-4 py-3 text-right">Líquido</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tabelaRelatorioAnual" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-slate-100 font-bold border-t border-slate-300">
                                        <tr>
                                            <td class="px-6 py-3 text-right uppercase text-[10px]">Total Consolidado:</td>
                                            <td class="px-4 py-3 text-right" id="totalAnoBruto">R$ 0,00</td>
                                            <td class="px-4 py-3 text-right" id="totalAnoDesc">R$ 0,00</td>
                                            <td class="px-4 py-3 text-right text-lg font-black" id="totalAnoLiq">R$ 0,00</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: IMPOSTO DE RENDA -->
            <section id="page-imposto-renda" class="page-content hidden">
                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-slate-800">Imposto de Renda (IRRF)</h3>
                            <p class="text-slate-500 text-sm">Gestão de retenções na fonte e repasses.</p>
                        </div>
                        <div class="flex gap-2 mt-4 md:mt-0">
                            <button onclick="irrf.switchView('operacional')" id="tab-ir-operacional" class="px-4 py-2 rounded-lg text-sm font-bold transition">Lançamentos</button>
                            <button onclick="irrf.switchView('gerencial')" id="tab-ir-gerencial" class="px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition">Relatório Anual</button>
                        </div>
                    </div>
                    <div id="view-ir-operacional">
                        <div class="card-dashboard p-6 mb-8 border-l-4 border-l-pink-500">
                            <form id="formIR" onsubmit="irrf.handleSave(event)">
                                <input type="hidden" name="id" id="idIRRFEdicao">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div><label class="label-padrao">Competência</label><input type="month" name="competencia" id="inputCompetenciaIR" required class="input-padrao font-bold"></div>
                                    <div><label class="label-padrao">Tipo de IRRF</label><select name="tipoIR" id="selectTipoIR" class="input-padrao" required><option value="Mensal">Retenção Mensal</option><option value="13º Salário">13º Salário</option><option value="Férias">Férias</option><option value="Extraordinário">Extraordinário</option></select></div>
                                    <div class="md:col-span-2"><label class="label-padrao">Origem / Fonte Retentora</label><select name="origem" id="selectOrigemIR" required class="input-padrao font-medium"><option value="">A carregar origens...</option></select></div>
                                    <div><label class="label-padrao text-pink-600">Valor Retido (R$)</label><input type="text" name="valorRetido" id="valorRetido" required class="input-padrao mask-money font-bold text-pink-700"></div>
                                    <div><label class="label-padrao">Data de Repasse</label><input type="date" name="dataRepasse" id="inputDataRepasse" class="input-padrao"></div>
                                    <div class="md:col-span-2"><label class="label-padrao">Observações</label><textarea name="observacoes" id="inputObsIR" rows="2" class="input-padrao resize-none" placeholder="Detalhes adicionais..."></textarea></div>
                                </div>
                                <div class="mt-6 flex flex-col md:flex-row justify-end items-center gap-4 border-t border-slate-100 pt-6">
                                    <button type="button" onclick="irrf.cancelarEdicao()" id="btnCancelIR" class="btn-secondary hidden border-red-200 text-red-600 hover:bg-red-50 w-full md:w-auto"><i class="fa-solid fa-xmark mr-2"></i> Cancelar Edição</button>
                                    <button type="submit" id="btnSalvarIR" class="btn-primary bg-pink-600 hover:bg-pink-700 border-none w-full md:w-auto shadow-lg shadow-pink-500/30"><i class="fa-solid fa-check mr-2"></i> Lançar IRRF</button>
                                </div>
                            </form>
                        </div>
                        <div class="flex justify-between items-end mb-4 px-2">
                            <h4 class="font-bold text-slate-700">Histórico de Retenções</h4>
                            <div class="flex items-center gap-2 bg-white p-1 rounded-lg border border-slate-200 shadow-sm">
                                <input type="month" id="filtroHistoricoIR" onchange="irrf.carregarHistorico()" class="text-xs border-0 outline-none bg-transparent font-bold text-slate-600 px-2 cursor-pointer">
                                <button onclick="irrf.limparFiltro()" class="text-slate-400 hover:text-red-500 p-1 transition" title="Limpar Filtro"><i class="fa-solid fa-eraser"></i></button>
                                <div class="w-px h-4 bg-slate-200 mx-1"></div>
                                <button onclick="irrf.carregarHistorico()" class="text-pink-600 hover:bg-pink-50 p-1 rounded transition text-xs" title="Atualizar"><i class="fa-solid fa-rotate"></i></button>
                            </div>
                        </div>
                        <div class="card-dashboard overflow-hidden p-0 border-none shadow-lg">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left border-collapse">
                                    <thead class="bg-slate-50 text-slate-500 uppercase text-[10px] font-bold border-b border-slate-200">
                                        <tr>
                                            <th class="pl-6 py-3 text-left">Competência</th>
                                            <th class="px-4 py-3 text-left">Origem / Fonte</th>
                                            <th class="px-4 py-3 text-left">Tipo</th>
                                            <th class="px-4 py-3 text-right">Valor Retido</th>
                                            <th class="px-4 py-3 text-center">Repasse</th>
                                            <th class="pr-6 py-3 text-center">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="listaHistoricoIR" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-pink-50 font-bold text-slate-800 border-t-2 border-pink-200">
                                        <tr>
                                            <td colspan="3" class="px-6 py-4 text-right uppercase text-[11px] tracking-wider text-pink-900">Total Retido no Período:</td>
                                            <td class="px-4 py-4 text-right font-black text-pink-700 text-lg" id="totalCompIRRF">R$ 0,00</td>
                                            <td colspan="2"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="view-ir-gerencial" class="hidden">
                        <div class="card-dashboard p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h4 class="font-bold text-slate-800">Mapa Anual de IRRF</h4>
                                <select id="filtroAnoIR" onchange="irrf.renderizarRelatorio()" class="input-padrao py-1 w-24 font-bold border-slate-200 bg-slate-50 text-pink-700"></select>
                            </div>
                            <div class="overflow-x-auto rounded-lg border border-slate-200">
                                <table class="w-full text-[11px]">
                                    <thead class="bg-slate-800 text-white font-bold"></thead>
                                    <tbody id="tabelaRelatorioIR" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-slate-100 font-bold border-t border-slate-300"></tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: PREVIDÊNCIA MUNICIPAL -->
            <section id="page-prev-municipal" class="page-content hidden">
                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-slate-800">Previdência Municipal</h3>
                            <p class="text-slate-500 text-sm">Receitas de contribuição (Aposentados, Pensionistas e Outros).</p>
                        </div>
                        <div class="flex gap-2 mt-4 md:mt-0">
                            <button onclick="previdencia.switchView('operacional')" id="tab-prev-operacional" class="px-4 py-2 rounded-lg text-sm font-bold transition">Lançamentos</button>
                            <button onclick="previdencia.switchView('gerencial')" id="tab-prev-gerencial" class="px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition">Relatório Anual</button>
                        </div>
                    </div>
                    <div id="view-prev-operacional">
                        <div class="card-dashboard p-6 mb-8 border-l-4 border-l-purple-500">
                            <h4 class="font-bold text-slate-700 mb-4 text-sm uppercase tracking-wide">Novo Registro de Receita</h4>
                            <form id="formPrev" onsubmit="previdencia.handleSave(event)">
                                <input type="hidden" name="id" id="idPrevEdicao">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div><label class="label-padrao">Competência</label><input type="month" name="competencia" id="inputCompetenciaPrev" required class="input-padrao font-bold text-slate-700"></div>
                                    <div class="md:col-span-1">
                                        <label class="label-padrao">Origem da Receita</label>
                                        <div class="input-group-addon">
                                            <select name="origem" id="selectOrigemPrev" required class="input-padrao rounded-r-none font-medium"><option value="">Carregando...</option></select>
                                            <div class="input-group-btn" onclick="router.navigate('config'); config.switchView('cadastros');" title="Gerenciar Origens"><i class="fa-solid fa-gear text-slate-400"></i></div>
                                        </div>
                                    </div>
                                    <div><label class="label-padrao text-purple-700">Valor Retido (R$)</label><input type="text" name="valor" id="valorPrev" required class="input-padrao mask-money font-bold text-lg text-purple-700"></div>
                                    <div><label class="label-padrao">Data do Repasse (Opcional)</label><input type="date" name="dataRepasse" id="inputDataRepassePrev" class="input-padrao text-slate-600"></div>
                                    <div class="md:col-span-2"><label class="label-padrao">Observações</label><textarea name="observacoes" id="inputObsPrev" rows="2" class="input-padrao resize-none" placeholder="Detalhes adicionais sobre a retenção..."></textarea></div>
                                </div>
                                <div class="mt-6 flex flex-col md:flex-row justify-end items-center gap-4 border-t border-slate-100 pt-6">
                                    <button type="button" onclick="previdencia.cancelarEdicao()" id="btnCancelPrev" class="btn-secondary hidden border-red-200 text-red-600 hover:bg-red-50 w-full md:w-auto transition"><i class="fa-solid fa-xmark mr-2"></i> Cancelar</button>
                                    <button type="submit" id="btnSalvarPrev" class="btn-primary bg-purple-600 hover:bg-purple-700 border-none w-full md:w-auto shadow-lg shadow-purple-500/30 transition transform active:scale-95"><i class="fa-solid fa-check mr-2"></i> Registrar Receita</button>
                                </div>
                            </form>
                        </div>
                        <div class="flex justify-between items-end mb-4 px-2">
                            <h4 class="font-bold text-slate-700">Histórico de Retenções</h4>
                            <div class="flex items-center gap-2 bg-white p-1 rounded-lg border border-slate-200 shadow-sm">
                                <input type="month" id="filtroHistoricoPrev" onchange="previdencia.carregarHistorico()" class="text-xs border-0 outline-none bg-transparent font-bold text-slate-600 px-2 cursor-pointer">
                                <button onclick="previdencia.limparFiltro()" class="text-slate-400 hover:text-red-500 p-1 transition" title="Limpar Filtro"><i class="fa-solid fa-eraser"></i></button>
                                <div class="w-px h-4 bg-slate-200 mx-1"></div>
                                <button onclick="previdencia.carregarHistorico()" class="text-purple-600 hover:bg-purple-50 p-1 rounded transition text-xs" title="Atualizar"><i class="fa-solid fa-rotate"></i></button>
                            </div>
                        </div>
                        <div class="card-dashboard overflow-hidden p-0 border-none shadow-lg">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left border-collapse">
                                    <thead class="bg-slate-50 text-slate-500 uppercase text-[10px] font-bold border-b border-slate-200">
                                        <tr>
                                            <th class="pl-6 py-3">Competência</th>
                                            <th class="px-4 py-3">Origem</th>
                                            <th class="px-4 py-3 text-right">Valor Retido</th>
                                            <th class="px-4 py-3 text-center">Repasse</th>
                                            <th class="pr-6 py-3 text-center w-32">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="listaHistoricoPrev" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-purple-50 font-bold text-slate-700 border-t border-purple-200">
                                        <tr>
                                            <td colspan="2" class="px-6 py-3 text-right uppercase text-[10px] tracking-wider text-purple-800">Total no Período:</td>
                                            <td class="px-4 py-3 text-right font-black text-purple-700 text-lg" id="totalCompPrev">R$ 0,00</td>
                                            <td colspan="2"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="view-prev-gerencial" class="hidden">
                        <div class="card-dashboard p-6">
                            <div class="flex items-center justify-between mb-6">
                                <div><h4 class="font-bold text-slate-800">Matriz Anual de Receitas</h4><p class="text-xs text-slate-500">Consolidado por Origem x Mês</p></div>
                                <select id="filtroAnoPrev" onchange="previdencia.renderizarRelatorio()" class="input-padrao py-1 w-24 font-bold border-slate-200 bg-slate-50 text-purple-700"></select>
                            </div>
                            <div class="overflow-x-auto rounded-lg border border-slate-200">
                                <table class="w-full text-[11px]">
                                    <thead class="bg-slate-800 text-white font-bold"></thead>
                                    <tbody id="tabelaRelatorioPrev" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-slate-100 font-bold border-t border-slate-300"></tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: MARGEM CONSIGNÁVEL -->
            <section id="page-margem" class="page-content hidden">
                <div class="max-w-6xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                        <div>
                            <h3 class="text-3xl font-bold text-slate-800">Margem Consignável</h3>
                            <p class="text-slate-500 mt-1">Cálculo de limites para empréstimos consignados (35%).</p>
                        </div>
                        <div class="bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm flex mt-4 md:mt-0">
                            <button onclick="margem.switchView('calculadora')" id="tab-margem-calculadora" class="px-6 py-2 rounded-lg text-sm font-bold transition">Calculadora</button>
                            <button onclick="margem.switchView('cadastro')" id="tab-margem-cadastro" class="px-6 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition">Cadastro de Pessoas</button>
                        </div>
                    </div>
                    <div id="view-margem-calculadora">
                        <form id="formCalculoMargem" onsubmit="margem.handleSalvarCalculo(event)" class="space-y-6">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <div class="lg:col-span-1 space-y-6">
                                    <div class="card-dashboard p-6 h-full border-l-4 border-l-indigo-500">
                                        <h4 class="font-bold text-slate-700 mb-4 flex items-center gap-2"><i class="fa-solid fa-user"></i> Servidor</h4>
                                        <div class="relative mb-4">
                                            <label class="label-padrao">Nome (Busca Automática)</label>
                                            <input type="text" id="buscaServidor" class="input-padrao font-bold text-indigo-900" placeholder="Digite para buscar..." oninput="margem.buscarPessoaInput(this)" autocomplete="off">
                                            <div id="listaSugestoes" class="autocomplete-list"></div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div><label class="label-padrao">CPF</label><input type="text" id="cpfServidor" name="cpf" class="input-padrao bg-slate-50" readonly></div>
                                            <div><label class="label-padrao">Matrícula</label><input type="text" id="matriculaServidor" name="matricula" class="input-padrao bg-slate-50" readonly></div>
                                        </div>
                                        <div class="mt-4"><label class="label-padrao">Competência Base</label><input type="month" id="compMargem" name="competencia" class="input-padrao"></div>
                                    </div>
                                </div>
                                <div class="lg:col-span-1 space-y-6">
                                    <div class="card-dashboard p-6 h-full">
                                        <h4 class="font-bold text-slate-700 mb-4 flex items-center gap-2"><i class="fa-solid fa-coins"></i> Rendimentos</h4>
                                        <div class="space-y-4">
                                            <div><label class="label-padrao text-emerald-600">Renda Bruta Total</label><input type="text" id="rendaBruta" name="bruto" class="input-padrao mask-money font-bold text-lg" oninput="margem.calcularMargem()"><p class="text-[10px] text-gray-400 mt-1">Soma de Salário Base + Vantagens</p></div>
                                            <div><label class="label-padrao text-red-500">Descontos Obrigatórios</label><input type="text" id="descObrigatorios" name="descontos" class="input-padrao mask-money text-red-600 font-medium" oninput="margem.calcularMargem()"><p class="text-[10px] text-gray-400 mt-1">INSS + IRRF + Pensão Alimentícia</p></div>
                                            <div class="pt-4 border-t border-slate-100">
                                                <div class="flex justify-between items-center mb-1"><span class="text-xs font-bold text-slate-500 uppercase">Renda Líquida</span><span id="displayRendaLiquida" class="font-bold text-slate-800">R$ 0,00</span></div>
                                                <div class="flex justify-between items-center bg-indigo-50 p-2 rounded">
                                                    <div class="flex items-center gap-2"><span class="text-xs font-bold text-indigo-500 uppercase">Margem %</span><input type="number" id="percentualMargem" value="35" class="w-12 text-center text-xs font-bold bg-white border border-indigo-200 rounded" oninput="margem.calcularMargem()"></div>
                                                    <span id="displayMargemTotal" class="font-bold text-indigo-600 text-lg">R$ 0,00</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="lg:col-span-1 space-y-6">
                                    <div class="card-dashboard p-6 h-full bg-slate-50 border-slate-200">
                                        <h4 class="font-bold text-slate-700 mb-4 flex items-center gap-2"><i class="fa-solid fa-bank"></i> Consignados</h4>
                                        <div class="mb-4"><label class="label-padrao">Empréstimos Atuais (Soma)</label><input type="text" id="emprestimosAtuais" name="emprestimos" class="input-padrao mask-money text-orange-600 font-bold" oninput="margem.calcularMargem()"></div>
                                        <div class="mt-8 p-4 bg-white rounded-xl border border-indigo-100 shadow-sm text-center"><span class="block text-xs font-bold text-indigo-400 uppercase tracking-widest mb-1">Margem Disponível</span><span id="displayMargemDisponivel" class="block text-3xl font-black text-slate-800">R$ 0,00</span></div>
                                        <button type="submit" class="btn-primary w-full mt-6 justify-center bg-indigo-600 hover:bg-indigo-700 border-none shadow-indigo-200"><i class="fa-solid fa-print"></i> Salvar & Emitir Carta</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="mt-8">
                            <h4 class="font-bold text-slate-700 text-lg mb-4">Histórico de Cálculos</h4>
                            <div class="card-dashboard overflow-hidden">
                                <div class="max-h-96 overflow-y-auto">
                                    <table class="w-full text-sm text-left">
                                        <thead class="bg-slate-50 text-slate-500 font-semibold uppercase text-xs sticky top-0 shadow-sm">
                                            <tr>
                                                <th class="pl-6 py-4">Data</th>
                                                <th class="px-4 py-4">Servidor</th>
                                                <th class="px-4 py-4 text-right">Renda Líquida</th>
                                                <th class="px-4 py-4 text-right">Margem Total</th>
                                                <th class="px-4 py-4 text-right font-bold text-emerald-600">Disponível</th>
                                                <th class="pr-6 py-4 text-center w-24">Ação</th>
                                            </tr>
                                        </thead>
                                        <tbody id="listaHistoricoMargem" class="divide-y divide-slate-100"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="view-margem-cadastro" class="hidden">
                        <div class="card-dashboard p-8 mb-8">
                            <h4 class="text-xl font-bold text-slate-800 mb-6">Novo Servidor</h4>
                            <form onsubmit="margem.handleSalvarServidor(event)" class="grid grid-cols-1 md:grid-cols-4 gap-6 items-end">
                                <div class="md:col-span-2"><label class="label-padrao">Nome Completo</label><input type="text" name="nome" required class="input-padrao" placeholder="Nome do servidor..."></div>
                                <div><label class="label-padrao">CPF</label><input type="text" name="cpf" required class="input-padrao" placeholder="000.000.000-00"></div>
                                <div><label class="label-padrao">Matrícula</label><input type="text" name="matricula" required class="input-padrao" placeholder="Ex: 1234-5"></div>
                                <div class="md:col-span-4 flex justify-end"><button type="submit" class="btn-primary bg-slate-700 hover:bg-slate-800 border-none"><i class="fa-solid fa-user-plus"></i> Cadastrar</button></div>
                            </form>
                        </div>
                        <div class="card-dashboard overflow-hidden">
                            <div class="px-6 py-4 border-b border-slate-100 bg-slate-50/50"><h4 class="font-bold text-slate-700">Base de Servidores</h4></div>
                            <div class="max-h-96 overflow-y-auto">
                                <table class="w-full text-sm text-left">
                                    <thead class="bg-white text-slate-500 font-semibold uppercase text-xs sticky top-0 shadow-sm">
                                        <tr>
                                            <th class="pl-6 py-3">Nome</th>
                                            <th class="px-4 py-3">CPF</th>
                                            <th class="px-4 py-3">Matrícula</th>
                                        </tr>
                                    </thead>
                                    <tbody id="listaServidores" class="divide-y divide-slate-100"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: CONSIGNADOS -->
            <section id="page-consignados" class="page-content hidden">
                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-slate-800">Consignados (Empréstimos)</h3>
                            <p class="text-slate-500 text-sm">Controle de repasses bancários retidos em folha.</p>
                        </div>
                        <div class="flex gap-2 mt-4 md:mt-0">
                            <button onclick="consignados.switchView('operacional')" id="tab-consig-operacional" class="px-4 py-2 rounded-lg text-sm font-bold transition">Lançamentos</button>
                            <button onclick="consignados.switchView('gerencial')" id="tab-consig-gerencial" class="px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition">Relatório Anual</button>
                        </div>
                    </div>
                    <div id="view-consig-operacional">
                        <div class="card-dashboard p-6 mb-8 border-l-4 border-l-teal-500">
                            <h4 class="font-bold text-slate-700 mb-4 text-sm uppercase tracking-wide">Novo Registro de Repasse</h4>
                            <form id="formConsig" onsubmit="consignados.handleSave(event)">
                                <input type="hidden" name="id" id="idConsigEdicao">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div><label class="label-padrao">Competência</label><input type="month" name="competencia" id="inputCompetenciaConsig" required class="input-padrao font-bold text-slate-700"></div>
                                    <div class="md:col-span-1">
                                        <label class="label-padrao">Banco Destino</label>
                                        <div class="input-group-addon">
                                            <select name="banco" id="selectBancoConsig" required class="input-padrao rounded-r-none font-medium"><option value="">Carregando...</option></select>
                                            <div class="input-group-btn" onclick="router.navigate('config'); config.switchView('cadastros');" title="Gerenciar Bancos"><i class="fa-solid fa-gear text-slate-400"></i></div>
                                        </div>
                                    </div>
                                    <div><label class="label-padrao text-teal-700">Valor do Repasse (R$)</label><input type="text" name="valor" id="valorConsig" required class="input-padrao mask-money font-bold text-lg text-teal-700"></div>
                                    <div><label class="label-padrao">Data do Repasse (Opcional)</label><input type="date" name="dataRepasse" id="inputDataRepasseConsig" class="input-padrao text-slate-600"></div>
                                    <div class="md:col-span-2"><label class="label-padrao">Observações</label><textarea name="observacoes" id="inputObsConsig" rows="2" class="input-padrao resize-none" placeholder="Detalhes adicionais (ex: nº do contrato, lote)..."></textarea></div>
                                </div>
                                <div class="mt-6 flex flex-col md:flex-row justify-end items-center gap-4 border-t border-slate-100 pt-6">
                                    <button type="button" onclick="consignados.cancelarEdicao()" id="btnCancelConsig" class="btn-secondary hidden border-red-200 text-red-600 hover:bg-red-50 w-full md:w-auto transition"><i class="fa-solid fa-xmark mr-2"></i> Cancelar</button>
                                    <button type="submit" id="btnSalvarConsig" class="btn-primary bg-teal-600 hover:bg-teal-700 border-none w-full md:w-auto shadow-lg shadow-teal-500/30 transition transform active:scale-95"><i class="fa-solid fa-check mr-2"></i> Lançar Repasse</button>
                                </div>
                            </form>
                        </div>
                        <div class="flex justify-between items-end mb-4 px-2">
                            <h4 class="font-bold text-slate-700">Histórico de Repasses</h4>
                            <div class="flex items-center gap-2 bg-white p-1 rounded-lg border border-slate-200 shadow-sm">
                                <input type="month" id="filtroHistoricoConsig" onchange="consignados.carregarHistorico()" class="text-xs border-0 outline-none bg-transparent font-bold text-slate-600 px-2 cursor-pointer">
                                <button onclick="consignados.limparFiltro()" class="text-slate-400 hover:text-red-500 p-1 transition" title="Limpar Filtro"><i class="fa-solid fa-eraser"></i></button>
                                <div class="w-px h-4 bg-slate-200 mx-1"></div>
                                <button onclick="consignados.carregarHistorico()" class="text-teal-600 hover:bg-teal-50 p-1 rounded transition text-xs" title="Atualizar"><i class="fa-solid fa-rotate"></i></button>
                            </div>
                        </div>
                        <div class="card-dashboard overflow-hidden p-0 border-none shadow-lg">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left border-collapse">
                                    <thead class="bg-slate-50 text-slate-500 uppercase text-[10px] font-bold border-b border-slate-200">
                                        <tr>
                                            <th class="pl-6 py-3">Competência</th>
                                            <th class="px-4 py-3">Banco</th>
                                            <th class="px-4 py-3 text-right">Valor</th>
                                            <th class="px-4 py-3 text-center">Data Repasse</th>
                                            <th class="pr-6 py-3 text-center w-32">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="listaHistoricoConsig" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-teal-50 font-bold text-slate-700 border-t border-teal-200">
                                        <tr>
                                            <td colspan="2" class="px-6 py-3 text-right uppercase text-[10px] tracking-wider text-teal-800">Total a Repassar:</td>
                                            <td class="px-4 py-3 text-right font-black text-teal-700 text-lg" id="totalCompConsig">R$ 0,00</td>
                                            <td colspan="2"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="view-consig-gerencial" class="hidden">
                        <div class="card-dashboard p-6">
                            <div class="flex items-center justify-between mb-6">
                                <div><h4 class="font-bold text-slate-800">Mapa Anual de Consignados</h4><p class="text-xs text-slate-500">Repasses por Banco x Mês</p></div>
                                <select id="filtroAnoConsig" onchange="consignados.renderizarRelatorio()" class="input-padrao py-1 w-24 font-bold border-slate-200 bg-slate-50 text-teal-700"></select>
                            </div>
                            <div class="overflow-x-auto rounded-lg border border-slate-200">
                                <table class="w-full text-[11px]">
                                    <thead class="bg-slate-800 text-white font-bold"></thead>
                                    <tbody id="tabelaRelatorioConsig" class="divide-y divide-slate-100 bg-white"></tbody>
                                    <tfoot class="bg-slate-100 font-bold border-t border-slate-300"></tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: DESPESAS ADM -->
            <section id="page-despesas" class="page-content hidden">
                <div class="max-w-6xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                        <div>
                            <h3 class="text-3xl font-bold text-slate-800">Despesas Administrativas</h3>
                            <p class="text-slate-500 mt-1">Gestão de custos fixos e variáveis.</p>
                        </div>
                        <div class="bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm flex mt-4 md:mt-0">
                            <button onclick="despesas.switchView('operacional')" id="tab-desp-operacional" class="px-6 py-2 rounded-lg text-sm font-bold transition">Lançamentos</button>
                            <button onclick="despesas.switchView('fornecedores')" id="tab-desp-fornecedores" class="px-6 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition">Fornecedores</button>
                            <button onclick="despesas.switchView('gerencial')" id="tab-desp-gerencial" class="px-6 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition">Relatório</button>
                        </div>
                    </div>
                    <div id="view-desp-operacional">
                        <form id="formDespesa" onsubmit="despesas.handleSave(event)" class="space-y-6">
                            <input type="hidden" name="id" id="idDespesaEdicao">
                            <div class="card-dashboard p-8 border-l-4 border-l-orange-500">
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                                    <div class="lg:col-span-1"><label class="label-padrao">Competência</label><input type="month" name="competencia" id="inputCompetenciaDesp" required class="input-padrao font-medium"></div>
                                    <div class="lg:col-span-2">
                                        <label class="label-padrao">Fornecedor / Favorecido</label>
                                        <div class="input-group-addon w-full">
                                            <select name="fornecedor" id="selectFornecedorDesp" required class="input-padrao w-full bg-white rounded-r-none border-r-0" onchange="despesas.verificarValorPadrao(this)"><option value="">Selecione...</option></select>
                                            <input type="text" id="inputFornecedorManual" class="input-padrao hidden w-full rounded-r-none border-r-0" placeholder="Digite o nome do favorecido...">
                                            <div class="input-group-btn" onclick="despesas.alternarInputFornecedor()" title="Alternar entre Lista e Digitação"><i class="fa-solid fa-pencil text-slate-500" id="iconAlternarForn"></i></div>
                                        </div>
                                    </div>
                                    <div class="lg:col-span-1"><label class="label-padrao">Nº Documento / NF</label><input type="text" name="numDoc" id="inputNumDoc" class="input-padrao" placeholder="Opcional"></div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div><label class="label-padrao text-orange-600">Valor Total (R$)</label><input type="text" id="valorDespesa" name="valor" required class="input-padrao mask-money font-bold text-lg text-orange-700"></div>
                                    <div><label class="label-padrao">Observações</label><input type="text" name="observacoes" id="inputObsDesp" class="input-padrao"></div>
                                </div>
                                <div class="mt-6 flex justify-end gap-2">
                                    <button type="button" onclick="despesas.cancelarEdicao()" id="btnCancelDesp" class="btn-secondary hidden text-red-500">Cancelar</button>
                                    <button type="submit" id="btnSalvarDesp" class="btn-primary bg-orange-600 hover:bg-orange-700 border-none"><i class="fa-solid fa-check"></i> Lançar Despesa</button>
                                </div>
                            </div>
                        </form>
                        <div class="mt-8">
                            <div class="flex justify-between items-end mb-4 px-2">
                                <h4 class="font-bold text-slate-700 text-lg">Histórico de Despesas</h4>
                                <div class="flex items-center gap-2 bg-white p-1 rounded-lg border border-slate-200 shadow-sm">
                                    <i class="fa-solid fa-filter text-slate-400 ml-2 text-xs"></i>
                                    <input type="month" id="filtroHistoricoDesp" onchange="despesas.carregarHistorico()" class="text-sm border-0 outline-none bg-transparent font-bold text-slate-600 w-32 cursor-pointer">
                                    <button onclick="despesas.limparFiltro()" class="text-slate-300 hover:text-red-500 px-2 transition" title="Limpar Filtro"><i class="fa-solid fa-times"></i></button>
                                    <div class="w-px h-4 bg-slate-200 mx-1"></div>
                                    <button onclick="despesas.carregarHistorico()" class="text-orange-600 hover:bg-orange-50 px-2 py-1 rounded transition" title="Atualizar"><i class="fa-solid fa-rotate"></i></button>
                                </div>
                            </div>
                            <div class="card-dashboard overflow-hidden">
                                <div class="max-h-96 overflow-y-auto">
                                    <table class="w-full text-sm text-left">
                                        <thead class="bg-slate-50 text-slate-500 font-semibold uppercase text-xs sticky top-0 shadow-sm">
                                            <tr>
                                                <th class="pl-6 py-4">Comp.</th>
                                                <th class="px-4 py-4">Fornecedor</th>
                                                <th class="px-4 py-4">Doc</th>
                                                <th class="px-4 py-4 text-right">Valor</th>
                                                <th class="pr-6 py-4 text-center">Status</th>
                                                <th class="pr-6 py-4 text-center w-24">Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="listaHistoricoDespesas" class="divide-y divide-slate-100"></tbody>
                                        <tfoot class="bg-orange-50 border-t-2 border-orange-100 font-bold text-slate-700 sticky bottom-0 z-20">
                                            <tr>
                                                <td colspan="3" class="pl-6 py-3 text-right uppercase text-xs tracking-wider">Total da Competência:</td>
                                                <td class="px-4 py-3 text-right text-orange-700 text-lg" id="totalCompetenciaDesp">R$ 0,00</td>
                                                <td colspan="2"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="view-desp-fornecedores" class="hidden">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="md:col-span-1">
                                <div class="card-dashboard p-6 h-full">
                                    <h4 class="font-bold text-slate-700 mb-4">Novo Fornecedor</h4>
                                    <form onsubmit="despesas.handleSaveFornecedor(event)" class="space-y-4">
                                        <input type="hidden" name="id" id="idFornecedorEdicao">
                                        <div><label class="label-padrao">Nome / Razão Social</label><input type="text" name="nome" id="inputNomeForn" required class="input-padrao"></div>
                                        <div><label class="label-padrao">CNPJ / CPF</label><input type="text" name="cnpj" id="inputCnpjForn" class="input-padrao"></div>
                                        <div><label class="label-padrao">Tipo de Serviço</label><input type="text" name="tipoServico" id="inputTipoForn" placeholder="Ex: Assessoria..." class="input-padrao"></div>
                                        <div><label class="label-padrao text-blue-600">Valor Fixo Mensal (Se houver)</label><input type="text" name="valorPadrao" id="inputValorForn" class="input-padrao mask-money font-bold"></div>
                                        <div class="flex gap-2 mt-4">
                                            <button type="submit" class="btn-secondary w-full justify-center bg-slate-800 text-white hover:bg-slate-900 border-none" id="btnSalvarForn"><i class="fa-solid fa-plus"></i> Cadastrar</button>
                                            <button type="button" onclick="despesas.cancelarEdicaoForn()" id="btnCancelForn" class="btn-secondary hidden text-red-500 border-red-200 hover:bg-red-50"><i class="fa-solid fa-times"></i></button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="md:col-span-2">
                                <div class="card-dashboard overflow-hidden h-full">
                                    <div class="px-6 py-4 border-b border-slate-100 bg-slate-50/50"><h4 class="font-bold text-slate-700">Base de Fornecedores</h4></div>
                                    <div class="max-h-[500px] overflow-y-auto">
                                        <table class="w-full text-sm text-left">
                                            <thead class="bg-white text-slate-500 font-semibold uppercase text-xs sticky top-0 shadow-sm">
                                                <tr>
                                                    <th class="pl-6 py-3">Nome</th>
                                                    <th class="px-4 py-3">Tipo</th>
                                                    <th class="px-4 py-3 text-right">Valor Padrão</th>
                                                    <th class="pr-6 py-3 text-center">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="listaFornecedores" class="divide-y divide-slate-100"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="view-desp-gerencial" class="hidden">
                        <div class="card-dashboard p-8 mb-6">
                            <div class="flex items-center justify-between mb-8">
                                <div><h4 class="text-xl font-bold text-slate-800">Mapa de Despesas Anual</h4><p class="text-sm text-slate-500">Fluxo de caixa por fornecedor e competência.</p></div>
                                <div class="flex items-center gap-3"><label class="text-sm font-bold text-slate-500">Ano Base:</label><select id="filtroAnoDesp" onchange="despesas.renderizarRelatorio()" class="input-padrao w-32 font-bold text-blue-900 bg-blue-50/50 border-blue-200"></select></div>
                            </div>
                            <div class="overflow-x-auto rounded-xl border border-slate-200">
                                <table class="w-full text-sm">
                                    <thead class="bg-slate-900 text-white text-xs uppercase font-bold tracking-wider"></thead>
                                    <tbody id="tabelaRelatorioDespesas" class="divide-y divide-slate-100"></tbody>
                                    <tfoot class="bg-slate-50 font-bold text-slate-800 border-t-2 border-slate-200"></tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: PAGAMENTOS -->
            <section id="page-pagamentos" class="page-content hidden">
                <div class="max-w-7xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-slate-800">Pagamentos Financeiros</h3>
                            <p class="text-slate-500 text-sm">Gestão unificada de obrigações e quitações.</p>
                        </div>
                        <div class="bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm flex mt-4 md:mt-0">
                            <button onclick="financeiro.switchView('pendentes')" id="tab-pag-pendentes" class="px-6 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2"><i class="fa-solid fa-clock"></i> Contas a Pagar</button>
                            <button onclick="financeiro.switchView('realizados')" id="tab-pag-realizados" class="px-6 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition flex items-center gap-2"><i class="fa-solid fa-check-circle"></i> Histórico de Pagamentos</button>
                        </div>
                    </div>
                    <div id="view-pag-pendentes">
                        <div class="flex flex-wrap items-center gap-2 bg-white p-2 rounded-xl border border-slate-200 shadow-sm mb-6">
                            <div class="relative">
                                <label class="block text-[10px] font-bold text-slate-400 uppercase ml-2">Ano</label>
                                <select id="filtroAnoPagamento" onchange="financeiro.carregarPagamentos()" class="input-padrao py-1.5 pl-3 pr-8 text-sm font-bold bg-slate-50 border-0 focus:ring-0 cursor-pointer w-24 text-center">
                                    <option value="" selected>Todos</option>
                                    <script>(function(){const anoAtual = new Date().getFullYear(); for(let i = anoAtual + 1; i >= anoAtual - 4; i--) { document.write(`<option value="${i}">${i}</option>`); }})();</script>
                                </select>
                            </div>
                            <div class="w-px h-8 bg-slate-200 mx-1"></div>
                            <div class="relative">
                                <label class="block text-[10px] font-bold text-slate-400 uppercase ml-2">Tipo</label>
                                <select id="filtroTipoPagamento" onchange="financeiro.carregarPagamentos()" class="input-padrao py-1.5 pl-3 pr-8 text-sm font-medium bg-slate-50 border-0 focus:ring-0 cursor-pointer w-36"><option value="todos">Todos</option><option value="FOLHA">Folha</option><option value="GUIA">Guias</option><option value="IRRF">IRRF</option><option value="CONSIGNADO">Consignados</option><option value="DESPESA">Despesas</option></select>
                            </div>
                            <div class="w-px h-8 bg-slate-200 mx-1"></div>
                            <div class="relative">
                                <label class="block text-[10px] font-bold text-slate-400 uppercase ml-2">Status</label>
                                <select id="filtroStatusPagamentos" onchange="financeiro.carregarPagamentos()" class="input-padrao py-1.5 pl-3 pr-8 text-sm font-medium bg-slate-50 border-0 focus:ring-0 cursor-pointer w-40"><option value="pendentes" selected>Pendentes</option><option value="todos">Tudo</option></select>
                            </div>
                            <button onclick="financeiro.carregarPagamentos()" class="ml-2 p-2 rounded-lg text-slate-500 hover:text-emerald-600 hover:bg-emerald-50 transition" title="Atualizar Lista"><i class="fa-solid fa-rotate"></i></button>
                        </div>
                        <div id="barraAcaoLote" class="hidden bg-slate-800 text-white p-3 rounded-lg mb-4 flex justify-between items-center shadow-lg animate-fade-in">
                            <div class="flex items-center gap-3"><span class="bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-md" id="contadorSelecao">0</span><span class="text-sm font-medium">itens selecionados para pagamento integral</span></div>
                            <button onclick="financeiro.confirmarPagamentoLote()" class="bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-1.5 rounded text-xs font-bold shadow transition flex items-center gap-2"><i class="fa-solid fa-check-double"></i> Pagar Selecionados</button>
                        </div>
                        <div class="card-dashboard overflow-hidden border-t-4 border-t-emerald-500 p-0 shadow-lg relative">
                            <div class="overflow-x-auto max-h-[650px] overflow-y-auto">
                                <table class="w-full text-sm text-left border-collapse">
                                    <thead class="bg-slate-50 text-slate-500 uppercase text-[10px] font-bold sticky top-0 shadow-sm z-20 border-b border-slate-200">
                                        <tr>
                                            <th class="pl-4 py-4 w-10 text-center"><input type="checkbox" id="checkMestrePagamentos" onchange="financeiro.toggleSelecionarTodos(this)" class="rounded border-gray-300 text-emerald-600 focus:ring-emerald-500 cursor-pointer"></th>
                                            <th class="pl-2 py-4 w-24">Status</th>
                                            <th class="px-4 py-4 w-32">Competência</th>
                                            <th class="px-4 py-4">Origem / Descrição</th>
                                            <th class="px-4 py-4 text-right w-36 bg-slate-50/50">Valor Total</th>
                                            <th class="px-4 py-4 text-right w-36 text-emerald-600">Valor Pago</th>
                                            <th class="px-4 py-4 text-right w-36 text-red-600 bg-red-50/10">A Pagar</th>
                                            <th class="pr-6 py-4 text-center w-32">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="listaPagamentos" class="divide-y divide-slate-100 bg-white"></tbody>
                                </table>
                            </div>
                            <div class="bg-slate-50 border-t border-slate-200 p-3 text-[10px] text-slate-400 flex flex-wrap justify-center gap-4 uppercase font-bold tracking-wider">
                                <span class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-yellow-500"></div> Folha</span>
                                <span class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-blue-500"></div> Guias</span>
                                <span class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-pink-500"></div> IRRF</span>
                                <span class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-teal-500"></div> Consignados</span>
                                <span class="flex items-center gap-1.5"><div class="w-2 h-2 rounded-full bg-orange-500"></div> Despesas</span>
                            </div>
                        </div>
                    </div>
                    <div id="view-pag-realizados" class="hidden">
                        <div class="card-dashboard p-6 border-t-4 border-t-slate-500">
                            <div class="flex justify-between items-center mb-6">
                                <div><h4 class="font-bold text-slate-700">Diário de Pagamentos</h4><p class="text-xs text-slate-500">Registro cronológico de todas as operações realizadas.</p></div>
                                <div class="flex items-center gap-2 bg-slate-50 p-1.5 rounded-lg border border-slate-200">
                                    <label class="text-[10px] font-bold text-slate-400 uppercase px-2">Ano:</label>
                                    <select id="filtroAnoHistorico" onchange="financeiro.carregarHistoricoGeral()" class="bg-white border-0 text-sm font-bold text-slate-700 w-24 rounded focus:ring-0 cursor-pointer">
                                        <script>(function(){const anoAtual = new Date().getFullYear(); for(let i = anoAtual; i >= anoAtual - 5; i--) { document.write(`<option value="${i}">${i}</option>`); }})();</script>
                                    </select>
                                    <button onclick="financeiro.carregarHistoricoGeral()" class="p-1.5 bg-white border border-slate-200 rounded hover:text-blue-600 transition" title="Atualizar"><i class="fa-solid fa-rotate"></i></button>
                                </div>
                            </div>
                            <div class="mb-4"><input type="text" id="buscaHistorico" onkeyup="financeiro.filtrarHistoricoNaTela()" placeholder="Buscar por descrição, valor ou ID..." class="input-padrao pl-10 border-slate-200 focus:border-slate-400"></div>
                            <div class="overflow-x-auto rounded-lg border border-slate-200 max-h-[600px] overflow-y-auto">
                                <table class="w-full text-sm text-left">
                                    <thead class="bg-slate-100 text-slate-500 font-bold uppercase text-[10px] sticky top-0 shadow-sm z-10">
                                        <tr>
                                            <th class="pl-6 py-3">Data Pagamento</th>
                                            <th class="px-4 py-3">Referência / Descrição</th>
                                            <th class="px-4 py-3 text-right">Valor Pago</th>
                                            <th class="px-4 py-3">Usuário</th>
                                            <th class="pr-6 py-3 text-center">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="listaHistoricoGeral" class="divide-y divide-slate-100 bg-white"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: CENTRAL DE RELATÓRIOS -->
            <section id="page-relatorios" class="page-content hidden">
                <div class="max-w-7xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4 no-print">
                        <div>
                            <h3 class="text-3xl font-bold text-slate-800">Central de Relatórios</h3>
                            <p class="text-slate-500 mt-1">Geração de documentos oficiais e matrizes de gestão.</p>
                        </div>
                        <div class="bg-white p-2 rounded-xl border border-slate-200 shadow-sm flex flex-wrap gap-2 items-center">
                            <div class="relative">
                                <label class="text-[10px] font-bold text-slate-400 uppercase ml-1 block">Tipo de Relatório</label>
                                <select id="relTipo" onchange="relatorios.ajustarFiltros()" class="input-padrao py-1 text-sm w-64 font-medium bg-slate-50 border-0 focus:ring-0 cursor-pointer">
                                    <optgroup label="Gerencial (BI)">
                                        <option value="balanco_anual">Balanço Anual (Superávit/Déficit)</option>
                                        <option value="confronto">Confronto Receitas x Despesas</option>
                                        <option value="receitas">Relatório de Receitas (Geral)</option>
                                        <option value="despesas">Relatório de Despesas (Geral)</option>
                                    </optgroup>
                                    <optgroup label="Arrecadação (Guias)">
                                        <option value="guias_consolidado">Arrecadação: Matriz Anual</option>
                                        <option value="guias_detalhado">Arrecadação: Detalhado</option>
                                    </optgroup>
                                    <optgroup label="Folha de Pagamento">
                                        <option value="folha_consolidado">Folha: Resumo Financeiro (Anual)</option>
                                        <option value="folha_tipos_consolidado">Folha: Matriz por Tipo de Folha</option>
                                        <option value="folha_detalhado">Folha: Detalhado (Mês)</option>
                                    </optgroup>
                                    <optgroup label="Previdência Municipal">
                                        <option value="previdencia_consolidado">Prev. Municipal: Matriz Anual</option>
                                        <option value="previdencia_detalhado">Prev. Municipal: Detalhado</option>
                                    </optgroup>
                                    <optgroup label="Imposto de Renda">
                                        <option value="ir_consolidado">IRRF: Matriz Anual</option>
                                        <option value="ir_status">IRRF: Detalhado (Pago/Pendente)</option>
                                    </optgroup>
                                    <optgroup label="Outros / Controle">
                                        <option value="consignados">Consignados: Repasses</option>
                                    </optgroup>
                                    <optgroup label="Prestadores de Serviço">
                                        <option value="assessorias_consolidado">Assessorias: Matriz Anual</option>
                                        <option value="assessorias_detalhado">Assessorias: Detalhado</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="relative">
                                <label class="text-[10px] font-bold text-slate-400 uppercase ml-1 block">Ano</label>
                                <select id="relAno" class="input-padrao py-1 text-sm font-bold w-24 text-center bg-slate-50 border-0">
                                    <script>(function(){const ano = new Date().getFullYear(); for(let i=ano+1; i>=ano-5; i--) document.write(`<option value="${i}" ${i===ano?'selected':''}>${i}</option>`);})();</script>
                                </select>
                            </div>
                            <div class="relative" id="boxRelMes">
                                <label class="text-[10px] font-bold text-slate-400 uppercase ml-1 block">Mês</label>
                                <select id="relMes" class="input-padrao py-1 text-sm w-32 bg-slate-50 border-0"><option value="">Todos</option><option value="01">Janeiro</option><option value="02">Fevereiro</option><option value="03">Março</option><option value="04">Abril</option><option value="05">Maio</option><option value="06">Junho</option><option value="07">Julho</option><option value="08">Agosto</option><option value="09">Setembro</option><option value="10">Outubro</option><option value="11">Novembro</option><option value="12">Dezembro</option></select>
                            </div>
                            <div class="relative hidden" id="boxRelStatus">
                                <label class="text-[10px] font-bold text-slate-400 uppercase ml-1 block">Situação</label>
                                <select id="relStatus" class="input-padrao py-1 text-sm w-32 bg-slate-50 border-0"><option value="TODOS">Todos</option><option value="PAGO">Pagos / Repassados</option><option value="PENDENTE">Pendentes</option></select>
                            </div>
                            <div class="relative hidden" id="boxRelFornecedor">
                                <label class="text-[10px] font-bold text-slate-400 uppercase ml-1 block">Fornecedor</label>
                                <select id="relFornecedor" class="input-padrao py-1 text-sm w-40 bg-slate-50 border-0"><option value="">Todos</option></select>
                            </div>
                            <div class="w-px h-8 bg-slate-200 mx-1 self-end mb-1"></div>
                            <div class="flex gap-2 self-end mb-0.5">
                                <button onclick="relatorios.gerar()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition flex items-center gap-2"><i class="fa-solid fa-bolt"></i> Gerar</button>
                                <button onclick="relatorios.imprimir()" class="bg-slate-800 hover:bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition flex items-center gap-2"><i class="fa-solid fa-print"></i> Imprimir</button>
                            </div>
                        </div>
                    </div>
                    <div id="previewWrapper" class="bg-slate-200/50 p-8 rounded-2xl border border-slate-300 shadow-inner overflow-auto flex justify-center no-print-bg">
                        <div id="printArea" class="bg-white shadow-2xl w-[297mm] min-h-[210mm] p-[10mm] relative text-slate-900 flex flex-col mx-auto transform transition-transform origin-top scale-75 md:scale-90 lg:scale-100 print-sheet">
                            <table class="report-table-master w-full border-collapse">
                                <thead class="report-header">
                                    <tr>
                                        <td>
                                            <div class="header-content pb-4 border-b-2 border-slate-900 mb-6">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center gap-4">
                                                        <img id="relLogoPrint" src="" class="h-14 w-auto object-contain hidden logo-target"> 
                                                        <div id="relLogoPlaceholderPrint" class="h-14 w-14 bg-slate-100 rounded flex items-center justify-center text-slate-300 logo-placeholder-target print:hidden"><i class="fa-solid fa-building-columns text-2xl"></i></div>
                                                        <div>
                                                            <h1 class="text-sm font-black uppercase tracking-tight nome-instituto-target">NOME DO INSTITUTO RPPS</h1>
                                                            <p class="text-[9px] font-medium text-slate-500 uppercase tracking-wider endereco-target">Endereço Completo</p>
                                                            <p class="text-[9px] font-medium text-slate-500 cnpj-target">CNPJ: 00.000.000/0000-00</p>
                                                        </div>
                                                    </div>
                                                    <div class="text-right">
                                                        <p class="text-[8px] text-slate-400 uppercase font-bold">Relatório Oficial</p>
                                                        <p class="text-[9px] font-mono text-slate-600 date-emission-target">Emissão: --/--/----</p>
                                                    </div>
                                                </div>
                                                <div class="text-center mt-4">
                                                    <h2 class="text-xl font-bold uppercase tracking-wide inline-block border-b border-slate-300 pb-1" id="relTitulo">SELECIONE UM RELATÓRIO</h2>
                                                    <p class="text-xs text-slate-500 mt-1 uppercase" id="relSubtitulo">Filtros aplicados</p>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </thead>
                                <tfoot class="report-footer">
                                    <tr>
                                        <td>
                                            <div class="footer-content pt-2 border-t border-slate-300 mt-4 flex justify-between text-[8px] text-slate-400 uppercase">
                                                <span>Gerado pelo Sistema de Gestão RPPS</span>
                                            </div>
                                        </td>
                                    </tr>
                                </tfoot>
                                <tbody>
                                    <tr>
                                        <td>
                                            <main class="report-body">
                                                <div id="relResumoCards" class="hidden grid-cols-3 gap-4 mb-6 border border-slate-200 p-2 rounded bg-slate-50 print-cards">
                                                    <div class="text-center border-r border-slate-200"><span class="text-[10px] font-bold text-slate-500 uppercase">Receitas</span><div class="text-lg font-black text-blue-700" id="resReceitas">R$ 0,00</div></div>
                                                    <div class="text-center border-r border-slate-200"><span class="text-[10px] font-bold text-slate-500 uppercase">Despesas</span><div class="text-lg font-black text-red-600" id="resDespesas">R$ 0,00</div></div>
                                                    <div class="text-center"><span class="text-[10px] font-bold text-slate-500 uppercase">Saldo / Resultado</span><div class="text-lg font-black text-slate-800" id="resSaldo">R$ 0,00</div></div>
                                                </div>
                                                <table class="w-full text-[11px] text-left border-collapse border border-slate-800 mb-8" id="relTabela">
                                                    <thead class="bg-slate-100 text-slate-800 font-bold uppercase border-b-2 border-slate-800"></thead>
                                                    <tbody class="divide-y divide-slate-300" id="relTbody"><tr><td class="p-8 text-center text-slate-400 italic border-none">Utilize os filtros acima e clique em "Gerar".</td></tr></tbody>
                                                </table>
                                                <div id="areaAssinaturas" class="mt-8 border-t border-slate-300 pt-8 page-break-inside-avoid">
                                                    <div class="grid grid-cols-2 gap-8 text-center">
                                                        <div class="flex flex-col items-center"><div class="border-t border-slate-800 w-2/3 mx-auto mb-1"></div><p class="font-bold text-xs diretor-target">...........................................</p><p class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">Diretor(a) Responsável</p></div>
                                                        <div class="flex flex-col items-center"><div class="border-t border-slate-800 w-2/3 mx-auto mb-1"></div><p class="font-bold text-xs">...........................................</p><p class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">Gerência Financeira</p></div>
                                                    </div>
                                                </div>
                                            </main>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: ARQUIVOS DIGITAIS -->
            <section id="page-arquivos" class="page-content hidden">
                <div class="max-w-6xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                        <div>
                            <h3 class="text-3xl font-bold text-slate-800">Arquivos Digitais (GED)</h3>
                            <p class="text-slate-500 mt-1">Gestão Eletrônica de Documentos e Atos Oficiais.</p>
                        </div>
                        <div class="bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm flex mt-4 md:mt-0">
                            <button onclick="arquivos.switchView('upload')" id="tab-arq-upload" class="px-6 py-2 rounded-lg text-sm font-bold transition">Novo Arquivo</button>
                            <button onclick="arquivos.switchView('lista')" id="tab-arq-lista" class="px-6 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-50 transition">Consultar Acervo</button>
                        </div>
                    </div>
                    <div id="view-arq-upload">
                        <form id="formUploadArquivo" onsubmit="arquivos.handleUpload(event)" class="space-y-6">
                           <div class="card-dashboard p-8 border-l-4 border-l-cyan-500">
                               <h4 class="font-bold text-slate-700 mb-6 flex items-center gap-2"><i class="fa-solid fa-cloud-arrow-up text-cyan-600"></i> Dados do Documento</h4>
                               <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                                  <div><label class="label-padrao">Tipo de Documento</label><select name="tipo" id="selectTipoArquivo" required class="input-padrao bg-white"><option value="">Carregando...</option></select></div>
                                  <div><label class="label-padrao">Ano de Referência</label><input type="number" name="ano" class="input-padrao font-bold" placeholder="AAAA" required min="1900" max="2100"></div>
                                  <div><label class="label-padrao">Número (Opcional)</label><input type="text" name="numero" class="input-padrao" placeholder="Ex: 123/2026"></div>
                               </div>
                               <div class="mb-6"><label class="label-padrao">Descrição / Ementa</label><textarea name="descricao" class="input-padrao w-full h-24 resize-none" placeholder="Resumo do conteúdo do documento..."></textarea></div>
                               <div class="mb-6">
                                   <label class="label-padrao mb-2 block">Arquivo (PDF, Imagem, Doc)</label>
                                   <div class="flex items-center justify-center w-full">
                                       <label for="fileInput" class="flex flex-col items-center justify-center w-full h-48 border-2 border-slate-300 border-dashed rounded-lg cursor-pointer bg-slate-50 hover:bg-slate-100 transition relative overflow-hidden group">
                                           <div class="flex flex-col items-center justify-center pt-5 pb-6 text-slate-500 group-hover:text-cyan-600 transition"><i class="fa-solid fa-cloud-arrow-up text-4xl mb-3"></i><p class="mb-2 text-sm"><span class="font-bold">Clique para enviar</span> ou arraste e solte</p><p class="text-xs">PDF, JPG, PNG ou DOC (MAX. 10MB)</p></div>
                                           <input id="fileInput" type="file" class="hidden" onchange="arquivos.mostrarNome(this)" required />
                                           <div id="fileFeedback" class="absolute inset-0 bg-cyan-50 flex flex-col items-center justify-center hidden"><i class="fa-solid fa-file-circle-check text-4xl text-cyan-600 mb-2"></i><p class="text-sm font-bold text-slate-700" id="fileNameDisplay">nome_do_arquivo.pdf</p><p class="text-xs text-slate-500 mt-1">Clique para trocar</p></div>
                                       </label>
                                   </div>
                               </div>
                               <div class="flex justify-end"><button type="submit" class="btn-primary bg-cyan-600 hover:bg-cyan-700 border-none shadow-lg shadow-cyan-600/20 px-8 py-3 text-lg"><i class="fa-solid fa-upload mr-2"></i> Enviar para Nuvem</button></div>
                           </div>
                        </form>
                    </div>
                    <div id="view-arq-lista" class="hidden">
                        <div class="card-dashboard p-8">
                            <div class="flex flex-col md:flex-row justify-between items-end mb-6 gap-4 border-b border-slate-100 pb-6">
                                <div><h4 class="font-bold text-slate-700 text-lg">Acervo Digital</h4><p class="text-sm text-slate-500">Consulte e baixe documentos arquivados.</p></div>
                                <div class="flex flex-wrap items-center gap-2 bg-slate-50 p-2 rounded-lg border border-slate-200 w-full md:w-auto">
                                    <div class="relative flex-grow md:flex-grow-0 md:w-64"><i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"></i><input type="text" id="filtroArqBusca" onkeyup="arquivos.filtrarLocalmente()" placeholder="Pesquisar arquivo..." class="input-padrao py-1.5 pl-8 text-sm w-full bg-white border border-slate-200 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 transition" autocomplete="off"></div>
                                    <div class="w-px h-6 bg-slate-300 mx-1 hidden md:block"></div>
                                    <div class="relative"><label class="text-[9px] font-bold text-slate-400 uppercase ml-1 block mb-0.5">Tipo</label><select id="filtroArqTipo" class="input-padrao py-1 text-sm w-32 font-medium bg-white" onchange="arquivos.carregarLista()"><option value="">Todos</option></select></div>
                                    <div class="relative"><label class="text-[9px] font-bold text-slate-400 uppercase ml-1 block mb-0.5">Ano</label><input type="number" id="filtroArqAno" class="input-padrao py-1 text-sm font-bold w-20 text-center bg-white" placeholder="Todos" onchange="arquivos.carregarLista()"></div>
                                    <div class="w-px h-8 bg-slate-300 mx-1 self-end mb-1 hidden md:block"></div>
                                    <button onclick="arquivos.carregarLista()" class="bg-white hover:bg-cyan-50 text-cyan-600 border border-slate-200 px-3 py-2 rounded-lg transition self-end mb-0.5" title="Atualizar Lista do Servidor"><i class="fa-solid fa-rotate"></i></button>
                                </div>
                            </div>
                            <div class="overflow-x-auto rounded-lg border border-slate-200 max-h-[600px] overflow-y-auto">
                               <table class="w-full text-sm text-left">
                                  <thead class="bg-slate-50 text-slate-500 font-semibold uppercase text-xs sticky top-0 shadow-sm z-10">
                                      <tr><th class="pl-6 py-4 w-32">Data Upload</th><th class="px-4 py-4 w-40">Tipo</th><th class="px-4 py-4">Detalhes do Documento</th><th class="pr-6 py-4 text-center w-40">Ações</th></tr>
                                  </thead>
                                  <tbody id="listaArquivosDigitais" class="divide-y divide-slate-100 bg-white"><tr><td colspan="4" class="p-8 text-center text-slate-400 italic">Carregando acervo...</td></tr></tbody>
                               </table>
                            </div>
                            <div class="mt-2 text-right"><span class="text-xs text-slate-400" id="contadorArquivos">0 documentos listados</span></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PÁGINA: IMPORTAÇÃO -->
            <section id="page-importacao" class="page-content hidden">
                <div class="max-w-5xl mx-auto">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                        <div>
                            <h3 class="text-3xl font-bold text-slate-800">Importação de Dados</h3>
                            <p class="text-slate-500 mt-1">Migração de dados legados (2025/Anteriores) via Excel.</p>
                        </div>
                        <div class="bg-purple-50 text-purple-700 px-4 py-2 rounded-lg text-sm font-bold border border-purple-100 shadow-sm flex items-center gap-2"><i class="fa-solid fa-triangle-exclamation"></i> Modo de Inserção em Lote</div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-1 space-y-6">
                            <div class="card-dashboard p-6 border-l-4 border-l-purple-500">
                                <label class="label-padrao mb-2">O que você vai importar?</label>
                                <select id="importTipo" class="input-padrao bg-white font-bold text-slate-700" onchange="importacao.atualizarGuia()"><option value="">Selecione...</option><option value="guia">Guias de Recolhimento</option><option value="folha">Folha de Pagamento</option><option value="ir">Imposto de Renda</option><option value="previdencia">Previdência Municipal</option><option value="despesa">Despesas Administrativas</option></select>
                                <div class="mt-4 pt-4 border-t border-slate-100">
                                    <p class="text-xs text-slate-500 mb-2">Instruções:</p>
                                    <ol class="list-decimal list-inside text-xs text-slate-600 space-y-1"><li>Selecione o tipo acima.</li><li>Organize seu Excel na ordem exata mostrada abaixo.</li><li>Selecione as células (sem cabeçalho).</li><li>Copie (Ctrl+C) e Cole (Ctrl+V) na área ao lado.</li></ol>
                                </div>
                            </div>
                            <div id="importGuiaContainer" class="hidden">
                                <div class="bg-slate-800 text-white p-4 rounded-xl shadow-lg">
                                    <h5 class="font-bold text-xs uppercase tracking-wider mb-3 text-purple-300 border-b border-slate-700 pb-2">Ordem das Colunas (Excel)</h5>
                                    <ul id="importListaColunas" class="space-y-2 text-xs font-mono"></ul>
                                    <div class="mt-4 bg-slate-700/50 p-2 rounded text-[10px] text-slate-400 italic border border-slate-600">* Datas aceitas: 2025-01, jan/25, 01/2025.<br>* Valores: 1.000,00 ou 1000.00</div>
                                </div>
                            </div>
                        </div>
                        <div class="lg:col-span-2">
                            <div class="card-dashboard p-0 overflow-hidden flex flex-col h-full min-h-[500px]">
                                <div class="bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center">
                                    <h4 class="font-bold text-slate-700 text-sm">Área de Transferência</h4>
                                    <button onclick="importacao.limpar()" class="text-slate-400 hover:text-red-500 text-xs transition"><i class="fa-solid fa-eraser"></i> Limpar</button>
                                </div>
                                <textarea id="importDados" class="flex-1 w-full p-4 font-mono text-xs text-slate-600 bg-white resize-none focus:outline-none focus:bg-slate-50 transition" placeholder="Clique aqui e pressione Ctrl+V para colar os dados do Excel..."></textarea>
                                <div class="p-4 bg-slate-50 border-t border-slate-200 flex justify-end">
                                    <button onclick="importacao.executar()" class="btn-primary bg-purple-600 hover:bg-purple-700 border-none shadow-lg shadow-purple-600/20 px-8 py-3 w-full sm:w-auto"><i class="fa-solid fa-bolt mr-2"></i> Processar Importação</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            </div>

        </div>
    </main>

    <!-- MODAL DE PAGAMENTO -->
    <div id="modalPagamento" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-md border border-slate-200">
                    <div class="bg-emerald-600 px-6 py-4 flex justify-between items-start">
                        <div class="text-white">
                            <p class="text-[10px] font-bold uppercase tracking-widest opacity-80">Referência</p>
                            <h3 class="text-2xl font-black leading-none mt-1" id="modalCompetencia">00/0000</h3>
                            <p class="text-xs font-medium mt-1 opacity-90 truncate max-w-[280px]" id="modalNomeGuia">...</p>
                        </div>
                        <button type="button" onclick="financeiro.closeModal()" class="text-white/70 hover:text-white transition"><i class="fa-solid fa-xmark text-xl"></i></button>
                    </div>
                    <div class="px-6 py-6">
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 text-center">
                                <span class="block text-[10px] font-bold text-slate-400 uppercase">Valor Total</span>
                                <span class="block text-sm font-bold text-slate-700" id="modalValorTotal">R$ 0,00</span>
                            </div>
                            <div class="bg-red-50 p-3 rounded-lg border border-red-100 text-center">
                                <span class="block text-[10px] font-bold text-red-400 uppercase">Saldo a Pagar</span>
                                <span class="block text-lg font-black text-red-600" id="modalSaldoRestante">R$ 0,00</span>
                            </div>
                        </div>
                        <form onsubmit="financeiro.confirmarPagamento(event)" class="space-y-5">
                            <input type="hidden" id="modalIdHidden">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Data do Pagamento</label>
                                <input type="date" id="modalData" required class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Valor a Pagar (R$)</label>
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold">R$</span>
                                    <input type="text" id="modalValorPago" required class="w-full bg-white border border-slate-200 rounded-lg pl-10 pr-3 py-2 text-lg font-bold text-emerald-700 mask-money">
                                </div>
                            </div>
                            <div class="border-t border-slate-100 pt-4 mt-2">
                                <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Histórico de Baixas</p>
                                <div class="bg-slate-50 rounded-lg border border-slate-100 max-h-32 overflow-y-auto">
                                    <table class="w-full text-xs"><tbody id="historicoPagamentosBody" class="divide-y divide-slate-100"></tbody></table>
                                </div>
                            </div>
                            <div class="flex gap-3 pt-2">
                                <button type="button" onclick="financeiro.closeModal()" class="flex-1 bg-white border border-slate-300 text-slate-600 py-2.5 rounded-lg font-bold text-sm">Cancelar</button>
                                <button type="submit" class="flex-1 bg-emerald-600 text-white py-2.5 rounded-lg font-bold text-sm hover:bg-emerald-700">Confirmar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL DE MENSAGEM (SYSTEM ALERT) -->
    <div id="sys-modal-alert" class="fixed inset-0 z-[70] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity opacity-0" id="sys-modal-backdrop"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-sm opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" id="sys-modal-panel">
                    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10 transition-colors duration-300" id="sys-icon-bg">
                                <i class="fa-solid fa-info text-blue-600 text-lg" id="sys-icon-i"></i>
                            </div>
                            <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full">
                                <h3 class="text-lg font-bold leading-6 text-slate-900" id="sys-modal-title">Título</h3>
                                <div class="mt-2"><p class="text-sm text-slate-500 whitespace-pre-line" id="sys-modal-desc">Mensagem...</p></div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-slate-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 gap-2" id="sys-modal-actions">
                        <button type="button" class="btn-primary w-full sm:w-auto">OK</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- CÉREBRO DO SISTEMA (JAVASCRIPT UNIFICADO) -->
    <script src="app.js"></script>
</body>
</html>